
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://accelleran.github.io/drax-xapp-dev-guide/v2.1/xapp-dev-guide/" rel="canonical"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.0, mkdocs-material-7.3.6" name="generator"/>
<title>Documentation - dRAX xApp Dev Guide</title>
<link href="../assets/stylesheets/main.a57b2b03.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.3f5d1f46.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
<link href="../css/extra.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#documentation">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="dRAX xApp Dev Guide" class="md-header__button md-logo" data-md-component="logo" href=".." title="dRAX xApp Dev Guide">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            dRAX xApp Dev Guide
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Documentation
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
      Overview
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="./">
      Documentation
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../message_references/3.1/nats/">
        5G Message References
      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="dRAX xApp Dev Guide" class="md-nav__button md-logo" data-md-component="logo" href=".." title="dRAX xApp Dev Guide">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    dRAX xApp Dev Guide
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Overview
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Documentation
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Documentation
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
    Introduction
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#quick-guide">
    Quick guide
  </a>
<nav aria-label="Quick guide" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#deploy-the-xapp-dev-environment">
    Deploy the xApp Dev Environment
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#start-the-xapp-in-the-development-environment">
    Start the xApp in the development environment
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#edit-the-xapp">
    Edit the xApp
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-uninstall-the-xapp">
    How to uninstall the xApp
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#development-workflows">
    Development Workflows
  </a>
<nav aria-label="Development Workflows" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#development-in-the-container">
    Development in the container
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-ssh-to-access-container">
    Using ssh to access container
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-local-ide-to-edit-xapp-dev-environment-files">
    Using local IDE to edit xApp Dev Environment files
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-visual-studio-code-for-an-integrated-development-environment">
    Using Visual Studio Code for an integrated development environment
  </a>
<nav aria-label="Using Visual Studio Code for an integrated development environment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#install-vs-code">
    Install VS Code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-remote-ssh-in-vs-code">
    Install Remote-SSH in VS Code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#adding-the-xapp-dev-environment-as-new-ssh-host">
    Adding the xApp Dev Environment as new SSH host
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connecting-to-xapp-dev-environment">
    Connecting to xApp Dev Environment
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#adding-a-ssh-key-to-the-xapp-dev-environment">
    Adding a SSH key to the xApp Dev Environment
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#troubleshooting">
    Troubleshooting
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#build-your-own-xapp-dev-environment">
    Build your own xApp Dev Environment
  </a>
<nav aria-label="Build your own xApp Dev Environment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#clone-the-xapp-framework-git-repository">
    Clone the xApp Framework Git repository
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#edit-and-build-your-xapp-core-docker-image">
    Edit and build your xApp Core Docker image
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#prepare-the-xapp-helm-chart">
    Prepare the xApp Helm Chart
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploy-your-xapp-in-developer-mode">
    Deploy your xApp in Developer Mode
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optional-mount-a-host-folder-inside-your-xapp">
    (Optional) Mount a host folder inside your xApp
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#productize-your-xapp">
    Productize your xApp
  </a>
<nav aria-label="Productize your xApp" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#prepare-your-xapp">
    Prepare your xApp
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#build-xapp-core-docker-image">
    Build xApp Core Docker image
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optional-make-xapp-core-docker-image-globally-available">
    (Optional) Make xApp Core Docker image globally available
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#prepare-xapp-helm-chart">
    Prepare xApp Helm Chart
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#package-the-helm-chart">
    Package the Helm chart
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optional-upload-the-xapp-helm-chart-to-a-helm-repository">
    (Optional) Upload the xApp Helm Chart to a Helm Repository
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-xapp">
    Use xApp
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-framework-in-depth">
    xApp Framework In-depth
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-library-in-depth">
    xApp Library In-depth
  </a>
<nav aria-label="xApp Library In-depth" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-library-overview">
    xApp Library Overview
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#overview-of-the-xapp-interactions-with-the-ric">
    Overview of the xApp interactions with the RIC
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-xapp-structure-and-conventions">
    The xApp Structure and Conventions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-xapp-builder">
    The xApp Builder
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#drax-ric-databus">
    dRAX RIC Databus
  </a>
<nav aria-label="dRAX RIC Databus" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#example-1-just-logging-all-the-messages-received-from-the-drax-databus">
    Example 1: Just logging all the messages received from the dRAX Databus
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#drax-nats-databus">
    dRAX NATS Databus
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#drax-commands">
    dRAX Commands
  </a>
<nav aria-label="dRAX Commands" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-handover-command">
    The handover command
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#subband-masking-command">
    Subband-masking command
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#publish-to-drax-ric-databus">
    Publish to dRAX RIC Databus
  </a>
<nav aria-label="Publish to dRAX RIC Databus" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#event-based-publishing">
    Event-based publishing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-2-publishing-one-time-or-event-based-data-on-the-drax-databus">
    Example 2: Publishing one time or event-based data on the dRAX Databus
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#periodic-publishing">
    Periodic publishing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#publish-to-the-drax-nats-databus">
    Publish to the dRAX NATS Databus
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-the-drax-ric-api-gateway">
    Use the dRAX RIC API Gateway
  </a>
<nav aria-label="Use the dRAX RIC API Gateway" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-use-the-drax-ric-api-gateway-in-general">
    How to use the dRAX RIC API Gateway in general
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-pick-only-the-port-at-which-netconf-is-exposed">
    How to pick only the port at which NetConf is exposed
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-xapp-documentation-readmemd">
    The xApp Documentation README.md
  </a>
<nav aria-label="The xApp Documentation README.md" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-readmemd-file">
    The README.md file
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-we-expect-inside-the-readmemd-file">
    What we expect inside the README.md file
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-the-readmemd-is-made-available-via-readme-endpoint">
    How the README.md is made available via /readme endpoint
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-rest-api">
    xApp REST API
  </a>
<nav aria-label="xApp REST API" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
    Overview
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#adding-an-endpoint-behind-the-api">
    Adding an endpoint behind the /api
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-extend-the-context-of-the-newly-added-api-endpoint">
    How to extend the context of the newly added API endpoint
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reaching-api-endpoints">
    Reaching API endpoints
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-configuration-in-depth">
    xApp Configuration In-depth
  </a>
<nav aria-label="xApp Configuration In-depth" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview-of-the-xapp-configuration">
    Overview of the xApp Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-metadata">
    xApp Metadata
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-runtime-configuration">
    xApp Runtime Configuration
  </a>
<nav aria-label="xApp Runtime Configuration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-xapp-configuration-during-runtime">
    Setting xApp Configuration during runtime
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#define-the-xapp_configjson">
    Define the xapp_config.json
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changing-xapp-configuration-during-runtime-drax-dashboard">
    Changing xApp Configuration during runtime - dRAX Dashboard
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changing-xapp-configuration-during-runtime-xapp-api">
    Changing xApp Configuration during runtime - xApp API
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-endpoints">
    xApp Endpoints
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-settings-class">
    xApp Settings Class
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#resetting-the-configuration-upon-redeployment-of-the-xapp">
    Resetting the configuration upon redeployment of the xApp
  </a>
<nav aria-label="Resetting the configuration upon redeployment of the xApp" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#general-xapp-framework-configuration-options">
    General xApp Framework configuration options
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-create-configuration-option-widgets-on-the-drax-dashboard">
    How to create configuration option widgets on the dRAX Dashboard
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-helm-chart-in-depth">
    xApp Helm Chart In-Depth
  </a>
<nav aria-label="xApp Helm Chart In-Depth" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#version-control">
    Version control
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-core-docker-image-to-use">
    xApp Core Docker image to use
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#how-to-add-another-microservice-helm-chart-to-the-xapp">
    How to add another microservice helm chart to the xApp
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapps-lifecycle-in-depth">
    xApps Lifecycle In-depth
  </a>
<nav aria-label="xApps Lifecycle In-depth" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#service-monitor-and-service-orchestrator-roles">
    Service Monitor and Service Orchestrator roles
  </a>
<nav aria-label="Service Monitor and Service Orchestrator roles" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#service-orchestrator">
    Service Orchestrator
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#service-monitor">
    Service Monitor
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#onboarding">
    Onboarding
  </a>
<nav aria-label="Onboarding" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#using-the-drax-dashboard">
    Using the dRAX Dashboard
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-the-service-orchestrator-endpoint-via-the-drax-ric-api-gateway">
    Using the Service Orchestrator endpoint via the dRAX RIC API Gateway
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#discovery">
    Discovery
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration">
    Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#uninstallation">
    Uninstallation
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#writing-the-xapp-core-in-a-different-language">
    Writing the xApp Core in a different language
  </a>
<nav aria-label="Writing the xApp Core in a different language" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#changing-the-xapp-library-using-a-different-programming-language">
    Changing the xApp Library - Using a different programming language
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changing-the-xapp-core">
    Changing the xApp Core
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changing-the-xapp-helm-chart">
    Changing the xApp Helm Chart
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changing-the-whole-xapp-framework">
    Changing the whole xApp Framework
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#appendix-pushing-to-dockerhub">
    Appendix: Pushing to Dockerhub
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#appendix-conversion-from-the-xapp-framework-to-the-xapp-library">
    Appendix: Conversion from the xApp Framework to the xApp Library
  </a>
<nav aria-label="Appendix: Conversion from the xApp Framework to the xApp Library" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-configuration">
    xApp Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-helm-chart">
    xApp Helm Chart
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#main-code">
    Main code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#actions">
    Actions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xapp-api">
    xApp API
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-state="indeterminate" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          5G Message References
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="5G Message References" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          5G Message References
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-state="indeterminate" data-md-toggle="__nav_3_1" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1">
          version 3.1
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="version 3.1" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
          version 3.1
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../message_references/3.1/nats/">
        Nats
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../message_references/3.1/kafka/">
        Kafka
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-state="indeterminate" data-md-toggle="__nav_3_2" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2">
          version 2.4
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="version 2.4" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
          version 2.4
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../message_references/2.4/nats/">
        Nats
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../message_references/2.4/kafka/">
        Kafka
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="documentation"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.</span> Documentation<a class="headerlink" href="#documentation" title="Permanent link">⚓︎</a></h1>
<h2 id="introduction"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.1</span> Introduction<a class="headerlink" href="#introduction" title="Permanent link">⚓︎</a></h2>
<p>dRAX is Accelleran’s O-RAN aligned Cloud Native RAN platform. dRAX is cloud native by design and encompasses the O-RAN defined CU function, a Service Management and Orchestration (SMO) layer,  as well as a near real-time RAN Intelligent Controller (RIC) platform. It features a micro-service oriented architecture with containerized functions orchestrated via Kubernetes and supports both 4G and 5G technologies.</p>
<p>The dRAX RIC platform is a Near Real-Time platform. It allows developers to implement xApps that can leverage dRAX near real-time open RAN data and communicate with other xApps  to bring new services and functionalities. It offers seamless integration with other orchestration platforms and lowers the technology barrier to implement Enterprise cellular networks by implementing artificial intelligence techniques for the configuration and operation of private cellular networks. This document serves as the developers guide in creating and deploying xApps on the Accelleran dRAX.</p>
<p>To make the development and integration of xApps into dRAX as smooth as possible, we have created the dRAX xApp Framework. This framework consists of a number of predefined and pre-developed resources that can communicate with the rest of the entities within the dRAX RIC. This allows the framework to seamlessly integrate with dRAX on deployment. Using abstractions of the lower level details, the xApp Framework exposes easy to use methods which allows the developers to only focus on the functionality of their xApp.</p>
<p>The dRAX xApp Framework consists of the following components, which are shown on <em>Figure 2</em>:</p>
<ol>
<li>The xApp Library - a Python library which interfaces with the dRAX RIC platform</li>
<li>The xApp Database - Redis server for storage of configuration data</li>
<li>The xApp Core - the core logic of the xApp written by the developer</li>
<li>The xApp Helm Chart - a Helm Chart used to deploy the xApp and integrate it with dRAX RIC</li>
</ol>
<table>
<tr>
<td>
<img align="center" alt="dRAX xApps Framework diagram" src="images/xapps_framework_diagram.png" title="dRAX xApps Framework" width="500px"/>
</td>
</tr>
<tr>
<td><em>Figure: dRAX xApps Framework</em>
</td>
</tr>
</table>
<h2 id="quick-guide"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.2</span> Quick guide<a class="headerlink" href="#quick-guide" title="Permanent link">⚓︎</a></h2>
<p>This section introduces you to a development sandbox called the xApp Dev Environment, which can be easily deployed on an existing dRAX installation, in order to gain familiarity with the capabilities of our xApp Framework. We have basically created a Hello-World example inside of the xApp Core using the xApp Library, built a Docker image and prepared a remotely available Helm Chart.</p>
<h3 id="deploy-the-xapp-dev-environment"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.2.1</span> Deploy the xApp Dev Environment<a class="headerlink" href="#deploy-the-xapp-dev-environment" title="Permanent link">⚓︎</a></h3>
<p>The xApp Dev Environment can be easily deployed in a user friendly way via the dRAX Dashboard. Open the dRAX Dashboard, and using the left hand side tabs navigate to: <strong>New Deployment -&gt; xApp Deployment</strong>.</p>
<p>In the newly opened form, from the Method drop-down menu, select <strong>Deploy xApp Development Environment</strong>. Next, fill in the metadata fields, such as your xApps name, organization team, etc. The Version field indicates which version of the xApp Dev Environment to use. Leave this at “latest”, as this automatically picks the latest stable version of the xApp Dev Environment for your version of dRAX. Finally, the xApp Dev Environment also has the possibility to be accessed via ssh from remote. Therefore, you have to set the shh password which will be used in the <strong>Developer SSH Password</strong> field. Note: Enter a password between 7 to 15 characters which contains at least one numeric digit and a special character. Click the Submit button to deploy the xApp Dev Environment.</p>
<p>Accessing the xApp Dev Environment</p>
<p>Once you deploy the xApp Dev Env, you can check if all its pods are deployed. The xApp pods have a naming convention based on the metadata you provided: &lt;organization&gt;-&lt;team&gt;-&lt;xapp_name&gt;-&lt;version&gt;</p>
<p>This can be used to filter the pods in the kubectl command:</p>
<div class="highlight"><pre><span></span><code>kubectl get pods
</code></pre></div>
<p>Once all the pods are in running state, you can access the xApp Dev Environment by using the following command:</p>
<p>You can now access the xApp Dev Environment by going into the container in Kubernetes. The xApp pods have a naming convention based on the metadata you provided: &lt;organization&gt;-&lt;team&gt;-&lt;xapp_name&gt;-&lt;version&gt;</p>
<p>When the xApp is deployed you will have 2 pods in Kubernetes:</p>
<ul>
<li>&lt;organization&gt;-&lt;team&gt;-&lt;xapp_name&gt;-&lt;version&gt;</li>
<li>&lt;organization&gt;-&lt;team&gt;-&lt;xapp_name&gt;-&lt;version&gt;-xapp-redis</li>
</ul>
<p>The xApp Core is located under the &lt;organization&gt;-&lt;team&gt;-&lt;xapp_name&gt;-&lt;version&gt; pod, so to access the development environment you can:</p>
<div class="highlight"><pre><span></span><code>kubectl exec -it &lt;pod_name&gt; -- /bin/bash
</code></pre></div>
<h3 id="start-the-xapp-in-the-development-environment"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.2.2</span> Start the xApp in the development environment<a class="headerlink" href="#start-the-xapp-in-the-development-environment" title="Permanent link">⚓︎</a></h3>
<p>Finally you can start your xApp by issuing the following command inside the container:</p>
<div class="highlight"><pre><span></span><code>python3 xapp_main.py
</code></pre></div>
<h3 id="edit-the-xapp"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.2.3</span> Edit the xApp<a class="headerlink" href="#edit-the-xapp" title="Permanent link">⚓︎</a></h3>
<p>The developer is free to edit the xapp_main.py and create other .py files. You can stop the currently running xapp_main.py, edit the files and restart the xApp again. This allows you to work in a sandbox environment, all fully integrated into dRAX, and focus only on the functionality you bring.</p>
<h3 id="how-to-uninstall-the-xapp"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.2.4</span> How to uninstall the xApp<a class="headerlink" href="#how-to-uninstall-the-xapp" title="Permanent link">⚓︎</a></h3>
<p>You can simply delete the xApp Dev Environment by clicking the <strong>Uninstall</strong> button on the xApp Overview page on the dRAX Dashboard. Navigate to <strong>xApp Management -&gt; Overview</strong>.</p>
<p><strong>NOTE: </strong>Please note that any changes will be lost once the sandbox deployment is removed. Therefore it is important to backup your work before deleting the xApp Dev Environment. In the xApp Dev Environment container, we have also pre-installed git, so you are free to use it to backup your code to a remote Git repository. In the following section we will explore how to move from the xApp Dev Environment to a productized xApp.</p>
<h2 id="development-workflows"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3</span> Development Workflows<a class="headerlink" href="#development-workflows" title="Permanent link">⚓︎</a></h2>
<p>The xApp Dev Environment described in the <a href="#quick-guide">Quick Guide</a> section is a great way to quickly deploy the full xApp Framework, with the xApp Library in place and the xApp fully integrated into dRAX. In this section, we will explain the different workflows you can use in the development cycle.</p>
<h3 id="development-in-the-container"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.1</span> Development in the container<a class="headerlink" href="#development-in-the-container" title="Permanent link">⚓︎</a></h3>
<p>Once the xApp Dev Environment is deployed, you can access the xApp Dev Environment container as described in the <a href="#quick-guide">Quick Guide</a> section:</p>
<div class="highlight"><pre><span></span><code>kubectl exec -it &lt;pod_name&gt; -- /bin/bash
</code></pre></div>
<p>As part of the xApp Dev Environment, we have pre-installed tools such as:</p>
<ul>
<li>vim</li>
<li>nano</li>
<li>Git</li>
</ul>
<p>You are of course free to install any additional packages. This initial set should be enough to get you started in editing the xApp python files and backing up your code to Git. You can start the xApp by running:</p>
<div class="highlight"><pre><span></span><code>python3 xapp_main.py
</code></pre></div>
<h3 id="using-ssh-to-access-container"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.2</span> Using ssh to access container<a class="headerlink" href="#using-ssh-to-access-container" title="Permanent link">⚓︎</a></h3>
<p>If for any reason you don’t have access to the dRAX host machine or the kubectl command, you can also access the xApp Dev Environment using ssh. First, discover which port is used on the host machine as the ssh port for your xApp Dev environment. You can do this by going to the dRAX Dashboard and navigating to <strong>xApps Management -&gt; Overview</strong>. Find you xApp Dev Environment, and click the <strong>Show</strong> button under the <strong>Services</strong> column. You should see multiple services associated with your xApp, one of which should be the <strong>dev-ssh</strong> service. You will find the port on which this service is exposed under the <strong>NodePort</strong> column (it will be in the range of 30 000 - 32 000). You can now ssh into your xApp Dev Environment by using the IP of the dRAX host machine, the dev-ssh service nodePort, and the SSH Password set during the deployment of the xApp Dev Environment:</p>
<div class="highlight"><pre><span></span><code>ssh -p &lt;dev-ssh-nodeport&gt; xapp@&lt;drax-host-ip&gt;
</code></pre></div>
<p>You now have access to the python files in the xApp Core which are located in _/home/xapp/xapp_core _inside the container. You can edit the python files and start the xApp as normal using:</p>
<div class="highlight"><pre><span></span><code>python3 xapp_main.py
</code></pre></div>
<h3 id="using-local-ide-to-edit-xapp-dev-environment-files"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.3</span> Using local IDE to edit xApp Dev Environment files<a class="headerlink" href="#using-local-ide-to-edit-xapp-dev-environment-files" title="Permanent link">⚓︎</a></h3>
<p>As an xApp developer, it is often easier to develop the xApp in an IDE or user-friendly text editor. You may use a tool called sshfs to mount the files from the xApp Dev Environment container onto your local machine. This way you can edit the files locally in any text editor you want, and the changes will also take effect in the dRAX Dev Environment. Of course, you still need to access the xApp Dev Environment of ssh into it to actually start or stop the xApp!</p>
<p>You can install sshfs using the following command:</p>
<div class="highlight"><pre><span></span><code>sudo apt install -y sshfs
</code></pre></div>
<p>Next create a folder where you will mount the remote files:</p>
<div class="highlight"><pre><span></span><code>mkdir /path/to/xapp-dev-file
</code></pre></div>
<p>Finally use the sshfs command to mount the files:</p>
<div class="highlight"><pre><span></span><code>sshfs -p &lt;dev-ssh-node-port&gt; xapp@&lt;drax-host-ip&gt;:/home/xapp/xapp_core /path/to/xapp-dev-files
</code></pre></div>
<p>The xapp_core files will now be available in the "xapp-dev-files" folder you just created.</p>
<p><strong>NOTE:</strong> You still have to access the xApp Development Environment via kubectl or ssh into it in order to run the actual xApp with the "python3 xapp_main.py" command.</p>
<h3 id="using-visual-studio-code-for-an-integrated-development-environment"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.4</span> Using Visual Studio Code for an integrated development environment<a class="headerlink" href="#using-visual-studio-code-for-an-integrated-development-environment" title="Permanent link">⚓︎</a></h3>
<p>You can use Visual Studio Code to get an integrated development environment. Visual Studio Code has the "remote-ssh" extension which lets you connect to a remote ssh host, access the remote files in the user friendly text editor of VS Code, and have a terminal open to the remote host.</p>
<h4 id="install-vs-code"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.4.1</span> Install VS Code<a class="headerlink" href="#install-vs-code" title="Permanent link">⚓︎</a></h4>
<p>You can download the VS Code from: <a href="https://code.visualstudio.com/download">https://code.visualstudio.com/download</a></p>
<h4 id="install-remote-ssh-in-vs-code"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.4.2</span> Install Remote-SSH in VS Code<a class="headerlink" href="#install-remote-ssh-in-vs-code" title="Permanent link">⚓︎</a></h4>
<p>You need to install the remote-ssh extension in VS Code, and configure it to connect to your xApp Dev Environment (taking into account the ssh password and port used).</p>
<p>In the left hand menu, select the Extensions tab. Search for Remote-SSH and install the extension.</p>
<h4 id="adding-the-xapp-dev-environment-as-new-ssh-host"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.4.3</span> Adding the xApp Dev Environment as new SSH host<a class="headerlink" href="#adding-the-xapp-dev-environment-as-new-ssh-host" title="Permanent link">⚓︎</a></h4>
<p>Next, click F1 on the keyboard to open the Command Pallete (or VSCode -&gt; View -&gt; Command Palette). Now start typing "remote-ssh add new" and select the option that appears: "Remote-SSH: Add New SSH Host…".</p>
<p>Follow the instruction to enter the ssh command:</p>
<div class="highlight"><pre><span></span><code>ssh -p &lt;dev-ssh-port&gt; xapp@&lt;drax-host-ip&gt;
</code></pre></div>
<p>You will be asked to supply a ssh config file. Since we will use the password for ssh, you can just pick the default one. Or if you know what you are doing, you can create or select your ssh config file.</p>
<h4 id="connecting-to-xapp-dev-environment"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.4.4</span> Connecting to xApp Dev Environment<a class="headerlink" href="#connecting-to-xapp-dev-environment" title="Permanent link">⚓︎</a></h4>
<p>You can now find the newly added host, or your xApp Dev Environment, in the “Remote Explorer” tab on the left. You will see the host and can click on it to connect. You will be asked for the ssh password in the process (you might be asked for the ssh password a couple of times which is normal).</p>
<h4 id="adding-a-ssh-key-to-the-xapp-dev-environment"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.4.5</span> Adding a SSH key to the xApp Dev Environment<a class="headerlink" href="#adding-a-ssh-key-to-the-xapp-dev-environment" title="Permanent link">⚓︎</a></h4>
<p>You can of course add your public ssh key to the xApp Dev Environment and then use that in the ssh config file of VS Code Remote-SSH, which makes the connection process easier. Of course you have to keep in mind that once the xApp Dev environment is deleted, all your data in the xApp Dev Environment including the ssh key will be deleted. When deploying a new xApp Dev Environment, you have to set up the ssh key again.</p>
<h4 id="troubleshooting"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.3.4.6</span> Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">⚓︎</a></h4>
<p>There is a known issue if you try to connect to the remote xApp Dev Environment using the remote-ssh extension in VS Code. When you try to connect, you can get an error message:</p>
<p>“Could not establish connection to “10.8.0.1”: Downloading VS Code Server failed - please install either curl or wget on the remote”</p>
<p>To resolve it, you need to kill the VS Code server on the remote using the following command:</p>
<p>VSCode -&gt; View -&gt; Command Palette -&gt; input "remote" -&gt; Select Remote-SSH: Kill VS Code Server on Host…</p>
<p>You can then select the IP address of your xApp Dev Environment, and will be required to enter the ssh password. Once the process completes, reconnect to the remote ssh again and it should work this time.</p>
<h2 id="build-your-own-xapp-dev-environment"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.4</span> Build your own xApp Dev Environment<a class="headerlink" href="#build-your-own-xapp-dev-environment" title="Permanent link">⚓︎</a></h2>
<p>In certain use cases, the developer will need a more flexible approach than the xApp Dev environment. For example:</p>
<ul>
<li>Edit the xApp Helm Chart</li>
<li>Add another Docker image to the xApp</li>
<li>Add certain files or packages to the xApp Core</li>
</ul>
<p>In such cases, deploying the xApp Dev Environment will not be sufficient, as you don’t have such options. However, in this case you can create your own xApp Core Docker image, including any additional files you need to it, as well as edit the default xApp Helm Chart to create one specific to your xApp, including any additional Docker images. You can then enable the Developer Mode on your own xApp to have the same options as in the xApp Dev Environment.</p>
<p>In the following subsection, we assume that you are on the dRAX host machine, so the Docker image built will already be present on the dRAX machine, as well as the helm chart.</p>
<h3 id="clone-the-xapp-framework-git-repository"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.4.1</span> Clone the xApp Framework Git repository<a class="headerlink" href="#clone-the-xapp-framework-git-repository" title="Permanent link">⚓︎</a></h3>
<p>To do so, you can first clone the xApp Framework GitHub repository:</p>
<div class="highlight"><pre><span></span><code>git clone [https://github.com/accelleran/xapp-framework-package.git](https://github.com/accelleran/xapp-framework-package.git)
</code></pre></div>
<p><strong>NOTE:</strong> You will need to contact Accelleran and provide a GitHub username so that we can grant you access to this repository.</p>
<h3 id="edit-and-build-your-xapp-core-docker-image"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.4.2</span> Edit and build your xApp Core Docker image<a class="headerlink" href="#edit-and-build-your-xapp-core-docker-image" title="Permanent link">⚓︎</a></h3>
<p>This repository contains the xApp Library, as well as an example on how to build your own xApp located in the _example _folder. To build your own xApp Core Docker image, we provide the default Dockerfile. There are two Dockerfiles:</p>
<ul>
<li>Dockerfile - Used to generate the production version of the xApp</li>
<li>Dockerfile.dev - Used to generate the Development Environment version of your xApp</li>
</ul>
<p>You can, therefore, edit the Dockerfile.dev according to you own needs and initiate a build by issuing the following command:</p>
<div class="highlight"><pre><span></span><code>cd xapp-framework-package/example

sudo docker build -t my-xapp:0.1.0 --build-arg username=&lt;GITHUB_USERNAME&gt; --build-arg token=&lt;GITHUB_TOKEN&gt; -f Dockerfile.dev .
</code></pre></div>
<p>Here:</p>
<ul>
<li>my-xapp: This is the name of your xApp Docker image, which we will need to also provide to the Helm Chart;</li>
<li>0.1.0: This is the version of the Docker image. We follow the semver versioning, so we also advise you to do the same;</li>
<li>&lt;GITHUB_USERNAME&gt;: Replace this with the GitHub username that has access to the xApp Framework GitHub repository.</li>
<li>&lt;GITHUB_TOKEN&gt;: This is the security token of your GitHub account.</li>
</ul>
<h3 id="prepare-the-xapp-helm-chart"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.4.3</span> Prepare the xApp Helm Chart<a class="headerlink" href="#prepare-the-xapp-helm-chart" title="Permanent link">⚓︎</a></h3>
<p>Once the Docker image is built, we need to prepare the xApp Helm Chart. The default xApp helm Chart is available in the example folder of the xApp Framework Git repository. Therefore, go to the following folder:</p>
<div class="highlight"><pre><span></span><code>cd example/helm_chart/xapp
</code></pre></div>
<p>We need to edit the values.yaml file to point the xApp Helm Chart to use our previously built xApp Core Docker image. In our case the &lt;xapp-name&gt; is my-xapp, &lt;xapp-version&gt; is 0.1.0. Therefore, edit the values.yaml accordingly:</p>
<div class="highlight"><pre><span></span><code>...

image:

 repository: &lt;xapp-name&gt;

 tag: "&lt;xapp-version&gt;"

...
</code></pre></div>
<p>You are of course free to now edit the xApp Helm Chart in any way you see fit, for example adding another Docker image to it, which we explain in the section <a href="#how-to-add-another-microservice-helm-chart-to-the-xapp">How to add another microservice Helm Chart to the xApp</a>.</p>
<h3 id="deploy-your-xapp-in-developer-mode"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.4.4</span> Deploy your xApp in Developer Mode<a class="headerlink" href="#deploy-your-xapp-in-developer-mode" title="Permanent link">⚓︎</a></h3>
<p>You can now deploy your xApp in Developer Mode, which will grant you the same options as the xApp Dev Environment. Your xApp will be deployed as a sandbox environment, which you can access, further develop and debug, start or stop the xApp, etc.</p>
<p>To do so, run the following command on the dRAX host machine:</p>
<div class="highlight"><pre><span></span><code>helm install &lt;xapp-name&gt; /path/to/xAppHelmChartFolder --set developerMode.enabled=true --set-string global.kubeIp=&lt;drax-host-ip&gt;
</code></pre></div>
<p><strong>NOTE:</strong> You can give the deployment any generic name you want by changing the &lt;xapp-name&gt;. When deploying from the command line, using helm install, we also have to supply the dRAX Host IP as the global.kubeIp parameter in helm.</p>
<p>From this point on, you can use any of the development workflows as described in the <a href="#development-workflows">Development Workflows</a> section.</p>
<h3 id="optional-mount-a-host-folder-inside-your-xapp"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.4.5</span> (Optional) Mount a host folder inside your xApp<a class="headerlink" href="#optional-mount-a-host-folder-inside-your-xapp" title="Permanent link">⚓︎</a></h3>
<p>The xApp Helm Chart also has an optional feature, which is to mount a folder from the dRAX host machine inside the xApp Core container. This can be useful:</p>
<ul>
<li>The files located in that mounted folder will be shared between the host and xApp Core</li>
<li>When the xApp is deleted, the files in the mounted folder will still be present on the host machine</li>
<li>Provides an easy way to share files from the host to inside the xApp Core</li>
</ul>
<p>To enable such a folder, edit the helm install command used during the deployment of the xApp as follows:</p>
<div class="highlight"><pre><span></span><code>helm install &lt;xapp-name&gt; /path/to/xAppHelmChartFolder --set developerMode.enabled=true --set developerMode.hostPath=/path/to/shared/folder/on/host  --set-string global.kubeIp=&lt;drax-host-ip&gt;
</code></pre></div>
<p><strong>NOTE: </strong>The developerMode.hostPath uses the absolute path to a folder on the host machine. This folder will be mounted by default to the following folder inside the xApp Core container:</p>
<div class="highlight"><pre><span></span><code>/home/xapp/xapp_core/dev.
</code></pre></div>
<p>You can, for example, mount the whole example folder from the xApp Framework git repository, making the python files automatically saved on the host machine. This way even if you delete the xApp, your code will be preserved. Also, if you deploy another xApp, you can mount the same folder into it, getting your code into the second xApp automatically.</p>
<h2 id="productize-your-xapp"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.5</span> Productize your xApp<a class="headerlink" href="#productize-your-xapp" title="Permanent link">⚓︎</a></h2>
<p>When the developers are happy with a version of the xApp, they can prepare it for production mode. This means that we won’t use the developer mode options in the xApp Helm Chart, which will result in the xApp starting immediately on deployment, as opposed to creating a sandbox which the developer mode does. Also, this means we can prepare the Docker image using the Dockerfile instead of Dockerfile.dev.</p>
<h3 id="prepare-your-xapp"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.5.1</span> Prepare your xApp<a class="headerlink" href="#prepare-your-xapp" title="Permanent link">⚓︎</a></h3>
<p>We assume you have already cloned the xApp Framework Git repository, and have edited your code and helm chart using the xApp Dev Environment and workflows in the <a href="#development-workflows">Development Workflows</a> section or creating your own xApp Development Environment from section <a href="#build-your-own-xapp-dev-environment">Build your own xApp Dev Env</a>. We will now first prepare everything for productizing the xApp.</p>
<p>The python files that you have developed should be readily available. This includes the mandatory xapp_main.py which is the main python file to start the xApp.</p>
<h3 id="build-xapp-core-docker-image"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.5.2</span> Build xApp Core Docker image<a class="headerlink" href="#build-xapp-core-docker-image" title="Permanent link">⚓︎</a></h3>
<p>Use the Dockerfile (not the Dockerfile.dev) from the example folder of the xApp Framework. Edit it so that it copies over all your files into the xApp Core Docker image. Finally issue the build command:</p>
<div class="highlight"><pre><span></span><code>sudo docker build -t my-xapp:1.0.0 --build-arg username=&lt;GITHUB_USERNAME&gt; --build-arg token=&lt;GITHUB_TOKEN&gt; -f Dockerfile .
</code></pre></div>
<p><strong>NOTE:</strong> The . at the end specifies the Docker build context, hence it should point to where you python files are located.</p>
<h3 id="optional-make-xapp-core-docker-image-globally-available"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.5.3</span> (Optional) Make xApp Core Docker image globally available<a class="headerlink" href="#optional-make-xapp-core-docker-image-globally-available" title="Permanent link">⚓︎</a></h3>
<p>When you build the xApp Core Docker image, it will be available on the dRAX host machine. However, if you decide to install the xApp on another dRAX instance, you will have to:</p>
<ul>
<li>Either move the xApp Core Docker image to the new machine OR</li>
<li>Upload the xApp Core Docker image to a Docker image repository, such as Dockerhub to make it globally available</li>
</ul>
<p>We provide a guide on how to do so in the section on <a href="#appendix-pushing-to-dockerhub">Pushing to Dockerhub</a>.</p>
<h3 id="prepare-xapp-helm-chart"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.5.4</span> Prepare xApp Helm Chart<a class="headerlink" href="#prepare-xapp-helm-chart" title="Permanent link">⚓︎</a></h3>
<p>Next, we need to prepare the xApp helm Chart. Assuming you have already edited your xApp Helm chart, locate it, and make the following edits as well. Edit the values.yaml file to point to the xApp Core Docker image, either local or global one in a Docker image repository:</p>
<div class="highlight"><pre><span></span><code>...

## Image settings for the xApp Core

image:

    repository: dockerRepoUrl/&lt;xapp-name&gt;

    pullPolicy: IfNotPresent

...
</code></pre></div>
<p>Also don’t forget to set the xappFrameworkConfig.flushOnDeployment field back to ‘false’ in case you changed it to true.</p>
<p>Next, edit the xApp Helm chart Chart.yaml to specify the version:</p>
<div class="highlight"><pre><span></span><code>...

version: &lt;xapp-helm-chart-version&gt;

...

appVersion: &lt;xapp-version&gt;

...
</code></pre></div>
<p><strong>NOTE: </strong>The appVersion refers to the version of the xApp Core Docker image, while the version field is the version of the xApp helm Chart. The version of the Helm Chart is used when deploying the xApp (so it is used as the --version flag in the helm install command, or in the Version field on the xApp Deployment page of the dRAX Dashboard).</p>
<h3 id="package-the-helm-chart"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.5.5</span> Package the Helm chart<a class="headerlink" href="#package-the-helm-chart" title="Permanent link">⚓︎</a></h3>
<p>Package the Helm chart in a .tgz file using:</p>
<div class="highlight"><pre><span></span><code>helm package /helm_chart/xapp
</code></pre></div>
<p>This will create the .tgz xApp Helm chart package, which will also have the version of the xApp. You can now use this .tgz file to deploy your helm chart, either by issuing the helm install command on this file (and specifying the global.kubeIp), or using the Upload Helm chart deployment method from the dRAX Dashboard.</p>
<h3 id="optional-upload-the-xapp-helm-chart-to-a-helm-repository"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.5.6</span> (Optional) Upload the xApp Helm Chart to a Helm Repository<a class="headerlink" href="#optional-upload-the-xapp-helm-chart-to-a-helm-repository" title="Permanent link">⚓︎</a></h3>
<p>You can also create a Helm Chart repository, or use a pre-existing one, and add the xApp Helm Chart .tgz file to it. This way you can make it globally available. Now, from the dRAX Dashboard you can also use the Remote Helm Chart Repository deployment method for an xApp. How to create a Helm Chart repository is out of this document's scope.</p>
<h3 id="use-xapp"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.5.7</span> Use xApp<a class="headerlink" href="#use-xapp" title="Permanent link">⚓︎</a></h3>
<p>You can now share your xApp with the world. We recommend that you upload your xApp Core Docker image to a Docker image repository (such as Dockerhub) and make your own Helm Chart repository to expose your xApp helm Chart. This way anyone, anywhere can use your xApp if you grant them permissions.</p>
<p>All other scenarios will either require you to copy the xApp Core Docker image to the dRAX host machine, and/or copy the xApp helm chart to the dRAX host.</p>
<h2 id="xapp-framework-in-depth"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.6</span> xApp Framework In-depth<a class="headerlink" href="#xapp-framework-in-depth" title="Permanent link">⚓︎</a></h2>
<p>To accelerate the development of xApps, Accelleran has created the xApp Framework which is available on GitHub: <a href="https://github.com/accelleran/xapp-framework-package">https://github.com/accelleran/xapp-framework-package</a>. In this repository, the xApp developer has access to the xApp Library under <em>xapp_core/xapp_lib</em>. The developer can explore the xApp Library files to get familiar with the different methods and abstractions available. We also cover what the xApp Library comes with in the <a href="#xapp-library-in-depth">xApp Library In-depth</a> section.</p>
<p>Also, in the repository, we provide an example xApp in the <em>example</em> folder. Here, we provide template Python files which use the xApp Library and include examples of usage. In the _example _folder we provide the Dockerfiles, readme and requirements files. The Dockerfiles (one for production and another for development mode) that can be used on the xApp example to build the xApp Core. An example README.md file used for documentation is also provided, more details on it can be found in the <a href="#the-xapp-documentation-readmemd">The xApp Documentation README.md</a> section. The requirements.txt contains the python required packages for the xApp to run properly. This file is used during the build process of the xApp Core to install all the required packages in the Docker image, including the xApp Library. This is why credentials are also required to be passed to the build process, as explained in the <a href="#build-your-own-xapp-dev-environment">Build your own xApp Dev Environment</a> and <a href="#productize-your-xapp">Productize your xApp</a> sections.</p>
<p>In the <em>example/core _folder, we provide the example python code. The xapp_main.py file is the main python file where the xApp is started. In this example file, you can check how the xApp Builder is used, how to retrieve data from Kafka, as well as different examples on the usage. Also, the configuration file xapp_metadata.json is provided in the _example/core</em> folder, on which more details can be found in the <a href="#xapp-configuration-in-depth">xApp Configuration In-depth</a> section. The restapi.py python file is provided in the <em>example/core</em> folder that shows an example of how to add custom API endpoints to the xApp, more details can be found in the <a href="#xapp-rest-api">xApp REST API</a> section.</p>
<p>Finally, the example xApp also has the xApp Helm Chart in the _example _folder which contains the necessary minimum to deploy the xApp Framework in Kubernetes and seamlessly integrate it with the dRAX RIC. Details on the xApp Helm Chart can be found in the <a href="#xapp-helm-chart-in-depth">xApp Helm Chart In-Depth</a> section. The developer is of course free to explore the xApp Helm Chart and add features, such as adding more Docker images to be deployed along the xApp in advanced scenarios. We cover this in the <a href="#how-to-add-another-microservice-helm-chart-to-the-xapp">How to add another microservice helm chart to the xApp</a> section. The xapp_config.json and xapp_endpoints.json are configuration files created by the xApp Helm Chart and they will be stored in the _config _folder. More information about those configuration files and how to edit them can be found in the <a href="#xapp-configuration-in-depth">xApp Configuration In-depth</a> section.</p>
<p>As can be seen, the xApp framework consists of the following blocks, described also in <a href="#introduction">Figure: dRAX xApp Framework</a>:</p>
<ul>
<li>The xApp Database</li>
<li>The xApp Core</li>
<li>The xApp Library</li>
<li>The xApp Helm Chart</li>
</ul>
<p>The xApp framework is built using a microservice oriented architecture. The xApp Database and the xApp Core are Docker images, which are deployed using a Helm Chart, and orchestrated via Kubernetes. The xApp Database is used to store the configuration of the xApp, and can be used by the developer to store other data. The xApp Core is a container that includes the xApp Library. The xApp Library is a Python library that is the main part of the xApp Framework. The xApp Library is created in a way that abstracts how the xApp interfaces with the dRAX RIC. Different hooks are pre-built, such as the connections to the dRAX Databuses (NATS, Kafka), the API endpoints for communication to the dRAX SMO layer (dRAX Dashboard), methods to send dRAX commands (handover, sub-band masking), etc. These methods abstract the lower level details (such as URLs, ports, generating protobuf command messages, etc.) so that the developer does not need to worry about them, and can focus on the functionality and algorithms they are implementing.</p>
<h2 id="xapp-library-in-depth"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7</span> xApp Library In-depth<a class="headerlink" href="#xapp-library-in-depth" title="Permanent link">⚓︎</a></h2>
<h3 id="xapp-library-overview"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.1</span> xApp Library Overview<a class="headerlink" href="#xapp-library-overview" title="Permanent link">⚓︎</a></h3>
<p>The xApp Library is a library written in Python which is used by developers to implement their own new functionalities and/or services on the dRAX RIC. The xApp Library abstracts the interfaces towards the dRAX RIC, allowing developers to use these interfaces in an easy-to-use way. The xApp Library connects multiple components using its interfaces such as:</p>
<ol>
<li>The logic as implemented by the developer</li>
<li>The kafka and nats connectors</li>
<li>The REST API</li>
<li>The configuration and settings</li>
</ol>
<h3 id="overview-of-the-xapp-interactions-with-the-ric"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.2</span> Overview of the xApp interactions with the RIC<a class="headerlink" href="#overview-of-the-xapp-interactions-with-the-ric" title="Permanent link">⚓︎</a></h3>
<p>Once an xApp is deployed into dRAX it can interact with all the components present in the system. Currently, there are two main ways to achieve this: via the dRAX Databus or via the REST APIs. Depending on the use case, a developer can choose which communication method fits their need best. The use of the dRAX Databus is encouraged in scenarios where xApps need to access RAN data, exchange real-time data or issue commands via the Action Taker. The use of the REST APIs is best for non-real-time information gathering or for utilizing the Netconf functionalities exposed by the dRAX REST API Gateway. The xAPP interaction with the cells can happen either via the REST API or via direct Netconf sessions to the corresponding Netconf servers.</p>
<h3 id="the-xapp-structure-and-conventions"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.3</span> The xApp Structure and Conventions<a class="headerlink" href="#the-xapp-structure-and-conventions" title="Permanent link">⚓︎</a></h3>
<p>When creating a new Python xApp, we recommend the following structure:</p>
<div class="highlight"><pre><span></span><code>root/
  setup.cfg
  README.md
  requirements.txt
  core/
    restapi.py
    xapp_main.py
    xapp_metadata.json
  config/
    xapp_endpoints.json
    xapp_config.json
</code></pre></div>
<p>This folder structure splits the xApp in three parts:</p>
<ul>
<li>The root folder contains necessary information about the Python packages the xApp is and needs. Since Python usually expects those to be in the base of the tree we recommend leaving them there. This includes the README.md documentation file and requirements.txt to specify python package dependencies.</li>
<li>The core folder contains the xApp code (which can be spread over multiple files and subfolders). Here, we also expect the xapp_metadata.json file which is used by the xApp itself and contains the configuration details of the xApp including the default values. As an example, we also include here the restapi.py which contains custom API endpoints exposed by the xApp. Do note the directory of the file building the xapp is used as base by the builder.</li>
<li>The config folder contains various configuration files meant to be provided at runtime. This means the folder will usually not exist and not be added to the version tracking system, as its contents are created by the xApp Helm Chart.</li>
</ul>
<p>An example of this can be found in the <em>example</em> subfolder of the repository, along with some basic usage in <em>example/core/xapp_main.py</em>.</p>
<h3 id="the-xapp-builder"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.4</span> The xApp Builder<a class="headerlink" href="#the-xapp-builder" title="Permanent link">⚓︎</a></h3>
<p>For convenience an xApp Builder class has been added. An example of how its used can be found in the _example/core/xapp_main/.py _example xApp in the xApp Framework repository:</p>
<div class="highlight"><pre><span></span><code>builder = xapp_lib.XAppBuilder("..", absolute=False)
    builder.metadata("core/xapp_metadata.json")
    builder.endpoints("config/xapp_endpoints.json")
    builder.config("config/xapp_config.json")
    builder.readme("README.md")
    builder.restapi(
        [
            ("/api/", restapi.MainApiHandler),
            ("/api/actions", restapi.ActionsHandler),
            ("/api/request", restapi.RequestHandler),
        ]
    )
    xapp = builder.build()
</code></pre></div>
<p>This code, assuming it is written in root/core/xapp_main.py, will create an xApp builder using root/ as base (hence the “..” as its first argument). After this, the metadata, which is located in root/core/xapp_metadata.json, will be loaded by the xApp itself. The xapp_metadata.json is a mandatory configuration file of the xApp.</p>
<p>Next, the xapp_endpoints.json and xapp-config.json files can be loaded. Note that these files are created by the xApp Helm Chart as on deployment time configuration options, hence they are located in the root/config folder.</p>
<p>The xApp Builder then can load the README.md documentation file. Finally, if the xApp developer has created custom API endpoints in the root/core/restapi.py file, the APIs can be initiated by the xApp Builder as described above in the example code (providing their API endpoint and callback function).</p>
<p>Do note that the builder only registers paths and configuration, and thus any errors about missing files etc will only be thrown during the builder.build() call.</p>
<h3 id="drax-ric-databus"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.5</span> dRAX RIC Databus<a class="headerlink" href="#drax-ric-databus" title="Permanent link">⚓︎</a></h3>
<p>The data from the dRAX RIC Databus comes in through the Kafka object, which automatically takes care of properly setting up and configuring a Kafka client. Note that this object is a singleton created and owned by the xApp library object itself, and calling the .kafka() method multiple times will result in the same object being returned every time, which is why the following code works:</p>
<div class="highlight"><pre><span></span><code>xapp.kafka().subscribe(["topic"])
(topic, data) = xapp.kafka().recv_data()
</code></pre></div>
<p>The URL of the dRAX RIC Databus (Kafka in this case) is automatically generated in the xapp_endpoints.json file by the xApp Helm Chart. As seen, this config file is loaded into the xapp using:</p>
<div class="highlight"><pre><span></span><code>builder.endpoints("config/xapp_endpoints.json")
</code></pre></div>
<p>By default, kafka will use the value associated with the “KAFKA_URL” key inside the xapp_endpoints.json. However, the developer can choose to add additional keys in the xapp_endpoints.json file through the xApp Helm Chart, which is discussed in the <a href="#xapp-endpoints">xApp Endpoints</a> section. The xApp itself can then decide to use a different key by calling:</p>
<div class="highlight"><pre><span></span><code>(topic, data) = xapp.kafka(name="KAFKA_URL_2").recv_data()
</code></pre></div>
<p>A simple way to check what messages are received is to simply log everything coming in from the kafka object. This is shown in Example 1 in the example/core/xapp_main.py from the xApp Framework repository and in the test_kafka_producer unittest.</p>
<h4 id="example-1-just-logging-all-the-messages-received-from-the-drax-databus"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.5.1</span> Example 1: Just logging all the messages received from the dRAX Databus<a class="headerlink" href="#example-1-just-logging-all-the-messages-received-from-the-drax-databus" title="Permanent link">⚓︎</a></h4>
<div class="highlight"><pre><span></span><code>logging.info("Received message from dRAX Databus!")
logging.debug("dRAX Databus message on {topic}: {data}".format(topic=topic, data=data))
</code></pre></div>
<p>The data on the dRAX RIC Databus (Kafka) uses the JSON format. In order to decode json messages the xApp Library provides a decorator created with .json() that automatically transforms serialized data into a dictionary.</p>
<div class="highlight"><pre><span></span><code>(topic, data) = xapp.kafka().json().recv_message()
</code></pre></div>
<p>The 4G and 5G RAN data that is available on the dRAX Databus is described in a separate document that can be accessed via the following link:</p>
<p><a href="https://docs.google.com/document/u/1/d/e/2PACX-1vTmZjYiThXivi03Td_1LXjQVldAO_7AXqnVwc0Qe-uFCT16tKH6EBF2OTOhiZ0SFw/pub">https://docs.google.com/document/u/1/d/e/2PACX-1vTmZjYiThXivi03Td_1LXjQVldAO_7AXqnVwc0Qe-uFCT16tKH6EBF2OTOhiZ0SFw/pub</a></p>
<h3 id="drax-nats-databus"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.6</span> dRAX NATS Databus<a class="headerlink" href="#drax-nats-databus" title="Permanent link">⚓︎</a></h3>
<p>Connecting to the dRAX NATS Databus is nearly identical to connecting to the dRAX RIC Databus. The only difference is the xApp method call and the use of NATS_URL instead of KAFKA_URL:</p>
<div class="highlight"><pre><span></span><code>xapp.nats().subscribe(["topic"])
(topic, data) = xapp.nats().recv_data()
</code></pre></div>
<h3 id="drax-commands"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.7</span> dRAX Commands<a class="headerlink" href="#drax-commands" title="Permanent link">⚓︎</a></h3>
<p>From the xApp you can currently issue two types of commands towards the dRAX:</p>
<ol>
<li>
<p>The handover command</p>
</li>
<li>
<p>The subband masking command</p>
</li>
</ol>
<p>Both of them are declared inside the xapp_lib.actions module.</p>
<p><strong>NOTE:</strong> The dRAX Commands use the dRAX NATS Databus to send messages. Hence, the NATS client should be set up in the xApp, as described in the <a href="#drax-nats-databus">dRAX NATS Databus</a> section.</p>
<h4 id="the-handover-command"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.7.1</span> The handover command<a class="headerlink" href="#the-handover-command" title="Permanent link">⚓︎</a></h4>
<p>dRAX enables you to issue a handover command of a specific UE, from its currently serving cell to a certain target cell, assuming of course the target cell is in UEs range. In the <em>example/core/xapp_main.py</em> example of the xApp Framework we show this in Example 4:</p>
<div class="highlight"><pre><span></span><code>#### Example 4: Send handover command
handover_list = [
    {'ueIdx': 'ueRicId_to_handover_1', 'targetCell': 'Cell_1', 'sourceCell': 'Cell_2'},
    {'ueIdx': 'ueRicId_to_handover_2', 'targetCell': 'Cell_2', 'sourceCell': 'Cell_1'}
]
actions.send_handover_command(xapp.nats(), handover_list)
</code></pre></div>
<p>First, we have to create the handover_list. This is a list of dictionaries in Python. Each dictionary, as shown above, contains a handover request, where we have the following elements:</p>
<ul>
<li>'ueIdx': This is the ueDraxId of the UE that should be handed over;</li>
<li>'targetCell': The target cell to which the UE should get handed over to;</li>
<li>'servingCell': The UEs’ current serving cell.</li>
</ul>
<p>All that information can be retrieved from the messages on the dRAX RIC Databus. Once the handover_list is created, you simply call the 'send_handover_command' function passing along the NATS connection and the handover_list. This function abstracts the lower-level details on how a handover command message is generated and sent towards the dRAX and cells. Also, the different configuration options, such as where to send the message etc., are stored in the settings variable.</p>
<h4 id="subband-masking-command"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.7.2</span> Subband-masking command<a class="headerlink" href="#subband-masking-command" title="Permanent link">⚓︎</a></h4>
<p>dRAX enables you to also mask certain subbands of a cell. This way, these subbands become unusable by the cell. Similarly to the handover command, we have abstracted the lower-level details, and created a function you can call to mask the subbands of a certain cell. This is described in Example 5 in the <em>example/core/xapp_main.py</em> example of the xApp Framework:</p>
<div class="highlight"><pre><span></span><code>#### Example 5: Send subband masking command
subband_mask = [
    {'cell': 'Cell_1', 'num_of_bands': '13', 'mask': [1,1,1,1,1,1,1,1,1,1,1,1,1]},
    {'cell': 'Cell_2', 'num_of_bands': '9', 'mask': [1,1,1,1,1,1,1,1,1]}
]
actions.send_subband_masking_command(xapp.nats(), subband_mask)
</code></pre></div>
<p>First we create the subband_mask variable, which is a list of dictionaries in Python. Each dictionary contains the following elements:</p>
<ul>
<li>
<p>'cell': This is the cell name of the cell we want to apply subband masking on;</p>
</li>
<li>
<p>'num_of_bands': Number of bands, should be 13 for 20 Mhz or 9 for 15MHz;</p>
</li>
<li>
<p>'mask': This is a list containing booleans where each bool corresponds to a subband of the cell, if it's set to true the subband is used, else if it's set to false the subband is masked and not used.</p>
</li>
</ul>
<h3 id="publish-to-drax-ric-databus"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.8</span> Publish to dRAX RIC Databus<a class="headerlink" href="#publish-to-drax-ric-databus" title="Permanent link">⚓︎</a></h3>
<p>From your xApp, you can publish data on the dRAX RIC Databus for other xApps to use as well.</p>
<h4 id="event-based-publishing"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.8.1</span> Event-based publishing<a class="headerlink" href="#event-based-publishing" title="Permanent link">⚓︎</a></h4>
<p>You can publish certain event-based data to the dRAX RIC Databus. This is shown in Example 2 in the processor.py of the xApp Core:</p>
<h4 id="example-2-publishing-one-time-or-event-based-data-on-the-drax-databus"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.8.2</span> Example 2: Publishing one time or event-based data on the dRAX Databus<a class="headerlink" href="#example-2-publishing-one-time-or-event-based-data-on-the-drax-databus" title="Permanent link">⚓︎</a></h4>
<p>We will publish on topic "my_test_topic", and just republish the "data" data</p>
<div class="highlight"><pre><span></span><code>xapp.kafka().json().send_message("my_test_topic", data)
</code></pre></div>
<p>We have created an abstraction which takes the following parameters:</p>
<ol>
<li>"my_test_topic": This is the topic on the dRAX RIC Databus to which the data should be published</li>
<li>data: the actual data that needs to be published, it should be of a type that can be serialized as the dRAX RIC Databus expects JSON format messages (hence the xapp.kafka().json()... decorator).</li>
</ol>
<h4 id="periodic-publishing"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.8.3</span> Periodic publishing<a class="headerlink" href="#periodic-publishing" title="Permanent link">⚓︎</a></h4>
<p>If one wants to periodically publish information, they can spawn a separate thread using the spawn function from the xApp library:</p>
<div class="highlight"><pre><span></span><code>data = {"key": "data"}
def periodic_publish(xapp):
    while True:
        xapp().kafka().json().send_message("my_test_topic", data)
        sleep(1)
xapp.spawn(periodic_publish)
</code></pre></div>
<p><strong>NOTE: </strong>The xApp argument is a weak reference, thus the use of xapp() inside the function.</p>
<h4 id="publish-to-the-drax-nats-databus"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.8.4</span> Publish to the dRAX NATS Databus<a class="headerlink" href="#publish-to-the-drax-nats-databus" title="Permanent link">⚓︎</a></h4>
<p>Publishing to the dRAX NATS Databus is equally simple:</p>
<div class="highlight"><pre><span></span><code>data = {"key": "data"}
def periodic_publish(xapp):
    while True:
        xapp().nats().json().send_message("my_test_topic", data)
        sleep(1)
xapp.spawn(periodic_publish)
</code></pre></div>
<h3 id="use-the-drax-ric-api-gateway"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.9</span> Use the dRAX RIC API Gateway<a class="headerlink" href="#use-the-drax-ric-api-gateway" title="Permanent link">⚓︎</a></h3>
<p>The dRAX RIC exposes a number of APIs through the dRAX RIC API Gateway. The full documentation on all of the endpoints is available on the dRAX RIC API Gateway Swagerhub, which is exposed on the following URL:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernets_ip&gt;:31315/api/v1/docs
</code></pre></div>
<p>Just substitute <kubernetes_ip> with the advertise address of your Kubernetes cluster.</kubernetes_ip></p>
<p>Inside the actions module of the xApp Library, we have already implemented the code for making API calls, and abstracted the details on how to connect to the API. That information is stored in the xapp_endpoints.json file (see also section on <a href="#xapp-configuration-in-depth">xApp Configuration In-depth</a>) under API_GATEWAY_URL. We created a few examples of how this works in the xApp Example, while the SwagerHub contains detailed information and description of all the endpoints.</p>
<p>In summary, through the dRAX RIC API Gateway you can:</p>
<ul>
<li>xApps<ul>
<li>Get a list of deployed xApps</li>
<li>Get/Modify the configuration of another xApp</li>
<li>Check if the xApp is healthy</li>
<li>Deploy or delete other xApps</li>
</ul>
</li>
<li>4G Radio Controller<ul>
<li>Check the status of the 4GRC</li>
<li>Configure the 4GRC</li>
</ul>
</li>
<li>4G Cells<ul>
<li>Configure basic parameters of a cell using a JSON</li>
<li>Send a full NetConf RPC through the API to configure the cell</li>
<li>Upload a pre-existing configuration</li>
<li>Auto-configure cells</li>
<li>Reboot cells</li>
</ul>
</li>
<li>5G CU<ul>
<li>Programmatically deploy the 5G CU-CP and CU-UP</li>
<li>Configure the 5G CU-CP and CU-UP</li>
</ul>
</li>
</ul>
<h4 id="how-to-use-the-drax-ric-api-gateway-in-general"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.9.1</span> How to use the dRAX RIC API Gateway in general<a class="headerlink" href="#how-to-use-the-drax-ric-api-gateway-in-general" title="Permanent link">⚓︎</a></h4>
<p>Example 6 shows how to call the API gateway on the following endpoint:</p>
<div class="highlight"><pre><span></span><code>/xappconfiguration/discover/services/netconf
</code></pre></div>
<p>This endpoint, as described in the SwagerHub, returns the list of NetConf services deployed on dRAX. Since the Accelleran 4G small cells and the 5G CUs have NetConf servers running in them to be able to use NetConf to configure them, this way we can get that information.</p>
<div class="highlight"><pre><span></span><code>#### Example 6: How to use the dRAX RIC API Gateway
endpoint = '/xappconfiguration/discover/services/netconf'
api_response = requests.get(actions.create_api_url(xapp, endpoint))

if api_response.status_code == 200:
  try:
    logging.info(api_response.json())
  except:
    logging.info('Failed to load JSON, showing raw content of API response:')
    logging.info(api_response.text)
</code></pre></div>
<h4 id="how-to-pick-only-the-port-at-which-netconf-is-exposed"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.7.9.2</span> How to pick only the port at which NetConf is exposed<a class="headerlink" href="#how-to-pick-only-the-port-at-which-netconf-is-exposed" title="Permanent link">⚓︎</a></h4>
<p>Example 7 shows how to parse the retrieved information from the dRAX RIC API Gateway. Because the information retrieved can be parsed as JSON, in python we can simply use it as a Python dictionary:</p>
<div class="highlight"><pre><span></span><code>#### Example 7: Get the ports where the netconf servers of cells are exposed
        endpoint = '/xappconfiguration/discover/services/netconf'
        api_response = requests.get(actions.create_api_url(xapp, endpoint))

        for cell, cell_info in api_response.json().items():
            for port in cell_info['spec']['ports']:
                if port['name'] == 'netconf-port':
                    logging.info('Cell [{cell}] has NETCONF exposed on port [{port}]'.format(
                        cell=cell,
                        port=port['node_port'])
                    )
</code></pre></div>
<p>This would log the following example data:</p>
<div class="highlight"><pre><span></span><code>[netconf-dageraadplats] has NETCONF exposed on port [30023]
[netconf-parking] has NETCONF exposed on port [32634]
</code></pre></div>
<h2 id="the-xapp-documentation-readmemd"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.8</span> The xApp Documentation README.md<a class="headerlink" href="#the-xapp-documentation-readmemd" title="Permanent link">⚓︎</a></h2>
<h3 id="the-readmemd-file"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.8.1</span> The README.md file<a class="headerlink" href="#the-readmemd-file" title="Permanent link">⚓︎</a></h3>
<p>The README.md is a text file used to provide a reliable way to explain, describe and illustrate an xApp. Its content is fully text-based and allows special syntax using Markdown. The Markdown language is a lightweight markup language that allows the creation of formatted text using only a plain-text editor. It allows one to control the display of the document; formatting words as bold or italic, adding images, creating lists and much more. By filling the README.md file with xApp information, the Accelleran dRAX RIC will  display its content automatically in the dRAX dashboard of the specific xApp. Thus, a full description of the xApp and its context can be provided with a special style for the illustration. An example README.md file is provided in the <em>example</em> folder of the xApp Framework.</p>
<p>Here are some links describing the Markdown features:</p>
<ul>
<li>Wikipedia Markdown: <a href="https://en.wikipedia.org/wiki/Markdown">https://en.wikipedia.org/wiki/Markdown</a></li>
<li>Markdown CheatSheet: <a href="https://www.markdownguide.org/cheat-sheet/">https://www.markdownguide.org/cheat-sheet/</a></li>
<li>StackEdit: In-browser Markdown Editor</li>
<li>Markdown guide: <a href="https://guides.github.com/features/mastering-markdown/">https://guides.github.com/features/mastering-markdown/</a></li>
</ul>
<h3 id="what-we-expect-inside-the-readmemd-file"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.8.2</span> What we expect inside the README.md file<a class="headerlink" href="#what-we-expect-inside-the-readmemd-file" title="Permanent link">⚓︎</a></h3>
<p>The README.md file is used to explain, describe and illustrate xApp behavior. It is the place where the xApp developer can give information about the xApp and its context.</p>
<p>The xApp README file generally contains the following elements:</p>
<ul>
<li>A description of the xApp and its functionality</li>
<li>If the xApp is sharing data on the dRAX RIC Databus or not</li>
<li>If the xApp is sharing data, what is the format of the data</li>
<li>If the xApp is sharing data, which topic on the dRAX RIC Databus is the data shared on</li>
<li>If the xApp has additional custom API endpoints, and an explanation of what they are and what they do</li>
</ul>
<p>Then, it is the responsibility of the xApp developer to feed the information correctly and give the best description possible for its xApp. The Markdown style formatting is also available to help xApps developers to structure the document but it’s not mandatory.</p>
<h3 id="how-the-readmemd-is-made-available-via-readme-endpoint"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.8.3</span> How the README.md is made available via /readme endpoint<a class="headerlink" href="#how-the-readmemd-is-made-available-via-readme-endpoint" title="Permanent link">⚓︎</a></h3>
<p>As with the /config and /metadata endpoint on the xApp API, (consequently used for configuration purposes), the /readme endpoint retrieves the README.md file from the xApp Core and makes it available for other modules. Only the GET method is accepted for this endpoint.</p>
<p>To suit this behavior, the README.md must be a text file co-located with the xApp core files. An example of the README.md file is already provided in the xApp Framework Package to demonstrate the /readme endpoint functionality.</p>
<p>Thus, the README.md content is available the xApp API port:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernetes_ip&gt;:&lt;xapp_api_port&gt;/readme
</code></pre></div>
<p>Substitute &lt;kubernetes_ip&gt; with the advertised address of your Kubernetes cluster and the &lt;xapp_api_port&gt; by the exposed port of your xApp API.</p>
<h2 id="xapp-rest-api"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.9</span> xApp REST API<a class="headerlink" href="#xapp-rest-api" title="Permanent link">⚓︎</a></h2>
<p>The dRAX RIC platform has been, in its own roots, designed to use an adaptable approach. Through its genuinely defined architecture, an xApp can be developed and extended depending on needs to provide infinite tastes and flavors to the RIC.</p>
<p>The xApp Library, therefore, also includes Tornado as the API framework. Accelleran has already pre-built a number of xApp API endpoints that are used for xApp Configuration purposes. On the other hand, the developer can also take advantage of the xApp Library abstractions to create their own custom API endpoints. This allows xApp developers to create handlers for the API endpoint requests (POST, GET, DELETE, PUT, etc.), to create different actions per endpoint depending on the requests received and add support for event-based actions. For more information about the tornado framework, you can reach the following link:</p>
<p><a href="https://www.tornadoweb.org/en/stable/">https://www.tornadoweb.org/en/stable/</a></p>
<h3 id="overview"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.9.1</span> Overview<a class="headerlink" href="#overview" title="Permanent link">⚓︎</a></h3>
<p>The xApp API has a couple of endpoints predefined:</p>
<table>
<tr>
<td><strong>Endpoint</strong>
</td>
<td>
</td>
<td><strong>HTTP Methods</strong>
</td>
</tr>
<tr>
<td>/config
   </td>
<td>This endpoint is used to get or change the current configuration options
   </td>
<td>GET, PUT, DELETE, POST
   </td>
</tr>
<tr>
<td>/health/alive
   </td>
<td>This endpoint is used to check if the xApp is alive
   </td>
<td>GET
   </td>
</tr>
<tr>
<td>/health/ready
   </td>
<td>This endpoint is used to check if the xApp is ready
   </td>
<td>GET
   </td>
</tr>
<tr>
<td>/readme
   </td>
<td>This endpoint is used to get the README.md documentation of the xApp
   </td>
<td>GET
   </td>
</tr>
<tr>
<td>/api
   </td>
<td>This is the recommended exposed endpoint for adding custom API endpoints to your xApp
   </td>
<td>ANY
   </td>
</tr>
<tr>
<td>/metadata
   </td>
<td>This API endpoint is used to get the xApps metadata as defined in the xapp_metadata.json. Note, this API endpoint only has the GET method implemented.
   </td>
<td>GET
   </td>
</tr>
</table>
<p>These prebuilt API endpoints are used to:</p>
<ol>
<li>To enable the dRAX RIC to discover the xApp and make it visible through the dRAX Dashboard</li>
<li>To enable the real-time configuration of the xApp</li>
<li>To enable the developer to expose functionalities of the xApp to the rest of the dRAX as well as to external systems</li>
<li>To easily fetch the documentation and metadata of the xApp</li>
</ol>
<p>The /api is the extendable and optional endpoint that we have left up to developers to implement the functionalities. Example code for handling the /api endpoint can be found in the xApp Framework example/core/restapi.py. This way we keep the xApp Core the single point of focus for the developers. The use of /api is simply convention and developers can rename it as they wish. We will, however, use it here in this document when referring to developer created custom API endpoints.</p>
<h3 id="adding-an-endpoint-behind-the-api"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.9.2</span> Adding an endpoint behind the /api<a class="headerlink" href="#adding-an-endpoint-behind-the-api" title="Permanent link">⚓︎</a></h3>
<p>To create a new entry point for your xApp under /api, the xApp developer simply needs to add a handler to the xApp builder .restapi() call.</p>
<p>For each endpoint defined in the list, a callback class is associated. These classes will be called each time the endpoint is triggered and can also be overloaded at needs to handle every REST request (GET, PUT, POST, DELETE, ...).</p>
<p>In the following example /api/, /api/actions and /api/request have been defined as endpoints with corresponding handlers.</p>
<div class="highlight"><pre><span></span><code>builder.restapi([
      ("/api/", MainApiHandler),
      ("/api/actions", ActionsHandler),
      ("/api/request", RequestHandler),
  ])
</code></pre></div>
<p>Then, the endpoint handler can be declared to ensure defined behaviors per REST request.</p>
<p>In the following example, the RequestHandler class is defined for the /api/request endpoint. It handles:</p>
<ul>
<li>A first initialize function used to save a weak reference to the xapp class</li>
<li>A get function that handles the REST request GET for this specific endpoint</li>
<li>A post function that handles the REST request POST for this specific endpoint.</li>
</ul>
<div class="highlight"><pre><span></span><code>class RequestHandler(tornado.web.RequestHandler):
    def initialize(self, xapp):
        self.xapp = xapp
        self.write("init request handler\n")
    def get(self):
        self.write("request handler get\n")
    def post(self):
        self.set_header("Content-Type", "text/plain")
        self.write("You wrote " + self.get_body_argument("message"))
</code></pre></div>
<p>Hence, every endpoint is bound to a specific class handler that will define and organize all the expected management and behaviors when it will be triggered.</p>
<h3 id="how-to-extend-the-context-of-the-newly-added-api-endpoint"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.9.3</span> How to extend the context of the newly added API endpoint<a class="headerlink" href="#how-to-extend-the-context-of-the-newly-added-api-endpoint" title="Permanent link">⚓︎</a></h3>
<p>While deploying a new endpoint, xApp developers also might want to extend its functionalities to have the hand on much wider components. To have access to the functionalities of these components, a reference to the xapp will need to be provided to the handlers.</p>
<p>This reference will be forwarded automatically to the user class initialization function for further use inside it. In addition metaclassing can be used to pass additional parameters to the handler.</p>
<p>It allows xApps developers to declare a dictionary of variables and information that will be made automatically available in the initialize function of the handler definition.</p>
<p>The following example introduce the notion of context inside the callback class with the listener object passed to the MainApiHandler:</p>
<div class="highlight"><pre><span></span><code>def create_handle(listener):
    class MainApiHandler(tornado.web.RequestHandler):
        def initialize(self, xapp):
            self.xapp = xapp
        def get(self):
            self.write("Write a message into the listener...\n")
            listener.send_data("topic", "Message from restapi main handler")
            self.write("Message written.\n")
    return MainApiHandler

builder.restapi(["/api", create_handle(my_listener)])
</code></pre></div>
<p>In this example listener is an object of a user-defined class meant to forward logic to a main thread.</p>
<p>This way a certain message from the API can be forwarded to the main application. Hence, xApp developers can extend the possibilities of the xApps at needs in a fully configurable environment.</p>
<h3 id="reaching-api-endpoints"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.9.4</span> Reaching API endpoints<a class="headerlink" href="#reaching-api-endpoints" title="Permanent link">⚓︎</a></h3>
<p>All the endpoints of the xApp can be reached using the following syntax:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernetes_ip&gt;:&lt;xapp_api_port&gt;/&lt;endpoint&gt;
</code></pre></div>
<p>Just substitute <kubernetes_ip> with the advertised address of your Kubernetes cluster and the <xapp_api_port> by the exposed port of your xApp API. This can be found on the dRAX Dashboard by clicking the Show button under services, and locating the xapp-api service information. Finally, change the &lt;endpoint&gt; to whichever endpoint you need (/config, /metadata/ /api/custom_endpoint, etc.).</xapp_api_port></kubernetes_ip></p>
<h2 id="xapp-configuration-in-depth"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10</span> xApp Configuration In-depth<a class="headerlink" href="#xapp-configuration-in-depth" title="Permanent link">⚓︎</a></h2>
<p>The xApp Configuration has multiple aspects which need to be understood. First, the xApp Library itself has a Settings class which is used for handling the configuration options inside the actual xApp. These configuration options are split between multiple JSON files. One of the JSON files, the xapp_metadata.json, is created by the developer and holds the default values of the configuration options. The second configuration file, the xapp_config.json, is generated by the xApp Helm Chart and used to change the default values of the configuration options defined in the xapp_metadata.json on deployment time. Finally, the third configuration file, the xapp_endpoints.json, is also generated by the xApp Helm Chart on deployment and is used to store the dRAX RIC endpoints URLs and ports, which are auto discovered and used for seamless integration with the dRAX RIC.</p>
<p>To access the xApp configuration, the xApp Library exposes two xApp API endpoints: /config and /metadata. There are multiple ways of editing the configuration options during run-time. The users can use the dRAX Dashboard for a user friendly, GUI approach, or they can use the /config API endpoint to programmatically change the configuration options. Once the configuration options are changed in any way, the xApp Library Settings class will automatically save the changes to the xApp Database for persistence. Therefore, if the xApp is restarted, the changes to the configuration options will be picked up from the xApp Database.</p>
<h3 id="overview-of-the-xapp-configuration"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.1</span> Overview of the xApp Configuration<a class="headerlink" href="#overview-of-the-xapp-configuration" title="Permanent link">⚓︎</a></h3>
<p>In this subsection we describe the xApp Configuration aspects. We will explain the configuration split into multiple files, and what they contain.</p>
<p>The xApp relies on three different configuration files:</p>
<ol>
<li>The xapp_metadata.json: Required for every xApp, contains information about the xApp itself, including but not limited to the name of the xApp, a description, the date of the last modification, as well as the definitions of the configuration options of that xApp including their default values. This information is provided by the creator of the xApp and cannot be modified during run-time.</li>
<li>The xapp_config.json: This file is generated by the xApp Helm Chart on deployment. It is used to change the default values of the configuration that is defined in the xapp_metadata.json. Note, that this file is used to change the config on deployment, however,  this file can be separately created and sent to the /config API endpoint to change the configuration during runtime. The dRAX Dashboard basically uses this principle to change the configuration during runtime.</li>
<li>The xapp_endpoints.json: This file is also generated by the xApp Helm Chart. The xApp Helm Chart already auto discovers the necessary endpoint of the dRAX RIC (Kafka, NATS, xApp Database, dRAX RIC API Gateway, etc.) which are necessary for proper xApp functionality and integration. However, the developer or user may choose to add additional endpoints of their choosing to make them accessible through the Settings class in the xApp itself.</li>
</ol>
<p>When reading configuration (except for endpoints which are treated separately) the xApp first checks the xApp database for the configuration parameters, then if not present checks the configuration inside xapp_config.json, and if the configuration parameter is not present either, uses the default value from xapp_metadata.json. On the other hand, all writes during the lifetime of an xApp will be forwarded to xApp Database.</p>
<p>All three can be added using the builder pattern:</p>
<div class="highlight"><pre><span></span><code>builder = xapp_lib.XAppBuilder("..", absolute=False)

builder.metadata("core/xapp_metadata.json")

builder.endpoints("config/xapp_endpoints.json")

builder.config("config/xapp_config.json")

xapp = builder.build()
</code></pre></div>
<p><strong>NOTE:</strong> If for example the user during deployment does not need to change the default values defined in xapp_metadata.json, one can do so in the xApp Helm Chart by not generating the xapp_config.json. Still, the developers should leave the option for the xApp Builder to include this file if it exists. If the file does not exist, the xApp will just log that this file was not found, and us eteh default from the xapp-metadata.sjon.</p>
<h3 id="xapp-metadata"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.2</span> xApp Metadata<a class="headerlink" href="#xapp-metadata" title="Permanent link">⚓︎</a></h3>
<p>The Metadata contains basic information and metadata about the xApp itself. Usually the metadata is included in the repository containing the xApp itself and is created by the developer. The list of configuration options can be expanded depending on the need, but this is only done in development. The data contained inside the xapp_metadata.json cannot be changed during runtime. To change the value of the configuration options defined here, one must use the /config API endpoint.</p>
<table>
<tr>
<td>Configuration option
   </td>
<td>Type
   </td>
<td>Description
   </td>
</tr>
<tr>
<td>metadata.name
   </td>
<td>Uneditable
   </td>
<td>The name of the xApp
   </td>
</tr>
<tr>
<td>metadata.namespace
   </td>
<td>Uneditable
   </td>
<td>The namespace where the xApp is deployed. This is the same namespace as dRAX.
   </td>
</tr>
<tr>
<td>metadata.description
   </td>
<td>Uneditable
   </td>
<td>A description of the xApp
   </td>
</tr>
<tr>
<td>metadata.last_modified
   </td>
<td>Uneditable
   </td>
<td>A timestamp when the configuration was last modified. In format:
<p>
"d/m/Y H:M:S"
   </p></td>
</tr>
<tr>
<td>metadata.config_options
   </td>
<td>Uneditable
   </td>
<td>A list of configuration options in  \
{ \
    “name”: \
    ”description”: \
    ”default”:
<p>
}
<p>
format
   </p></p></td>
</tr>
</table>
<p>In the xApp Framework repository, we give an example of how the xapp_metadata.json can look like.</p>
<div class="highlight"><pre><span></span><code>{
    "name": "xApp Name",
    "configName": "",
    "description": "xApp Description...",
    "last_modified": "06/07/2020 23:32:00",
    "config_options": [
        {
            "name": "LOG_LEVEL",
            "description": "Log stuff",
            "default": 10,
            "jsonSchemaOptions": {
                "type": "number"
            },
            "uiSchemaOptions": {}
        },
        {
            "name": "example_slider",
            "description": "Test string configuration option",
            "default": 10,
            "jsonSchemaOptions": {
                "type": "number",
                "minimum": 0,
                "maximum": 50
            },
            "uiSchemaOptions": {
                "ui:widget": "range"
            }
        },
        {
            "name": "someUrl",
            "description": "Test URL configuration option",
            "default": "url://some.url",
            "jsonSchemaOptions": {
                "type": "string"
            },
            "uiSchemaOptions": {}
        },
        {
            "name": "boolean",
            "description": "Test boolean configuration option",
            "default": true,
            "jsonSchemaOptions": {
                "type": "boolean"
            },
            "uiSchemaOptions": {
                "ui:widget": "select"
            }
        }

    ]
}
</code></pre></div>
<p>As can be seen, we define 4 configuration options: LOG_LEVEL, example_slider, someUrl, boolean. Each of them has a name, description, default value, and visualization options for the dRAX Dashboard. The visualization options are described in the <a href="#how-to-create-configuration-option-widgets-on-the-drax-dashboard">How to create configuration option widgets on the dRAX Dashboard</a> section.</p>
<h3 id="xapp-runtime-configuration"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.3</span> xApp Runtime Configuration<a class="headerlink" href="#xapp-runtime-configuration" title="Permanent link">⚓︎</a></h3>
<p>The configuration options as seen before are defined in the xapp_metadata.json and loaded into the Settings class of the xApp. Changing the value of these configuration options can be done in multiple ways:</p>
<ul>
<li>During deployment time by defining the xapp_config.json through the xApp Helm Chart</li>
<li>During runtime via the dRAX Dashboard</li>
<li>During runtime using the /config xApp API endpoint</li>
</ul>
<h4 id="setting-xapp-configuration-during-runtime"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.3.1</span> Setting xApp Configuration during runtime<a class="headerlink" href="#setting-xapp-configuration-during-runtime" title="Permanent link">⚓︎</a></h4>
<p>If the user needs to change the xApp Configuration options default values on deployment, one can edit the xApp Helm Chart to generate the xapp_config.json file. In particular, the user can supply a values.yaml file containing the following:</p>
<h4 id="define-the-xapp_configjson"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.3.2</span> Define the xapp_config.json<a class="headerlink" href="#define-the-xapp_configjson" title="Permanent link">⚓︎</a></h4>
<div class="highlight"><pre><span></span><code>xappConfig:
  LOG_LEVEL: 20
  example_slider: 50
  someUrl: "nats://{{ .Values.global.kubeIp }}:31000"
  boolean: false
</code></pre></div>
<p>The configuration options in this example (LOG_LEVEL, example_slider, someUrl, boolean) need to be defined in the xapp-metadata.json. When comparing with the previous subsection, the xapp_metadata.json example, we see that the LOG_LEVEL by default has the value of 10. However, if we use the above-mentioned values file for the xApp Helm Chart, the LOG_LEVEL will change to 20 during deployment time.</p>
<h4 id="changing-xapp-configuration-during-runtime-drax-dashboard"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.3.3</span> Changing xApp Configuration during runtime - dRAX Dashboard<a class="headerlink" href="#changing-xapp-configuration-during-runtime-drax-dashboard" title="Permanent link">⚓︎</a></h4>
<p>The xApp Configuration can then further be changed during runtime. One way to achieve this is using the dRAX Dashboard. The dRAX Dashboard uses the xApps /metadata and /config API endpoints to retrieve information on the xApp. Then it can also use the /config API endpoint to change the runtime configuration of the xApp.</p>
<p>Simply navigate to the xApp Management -&gt; Overview page of the dRAX Dashboard. Click the icon under the Detail column of your xApp. Expand the Configuration Parameters section to see all the configuration options of your xApp like shown on <a href="#changing-xapp-configuration-during-runtime-drax-dashboard">Figure: xApp example configuration options</a>. Now change any value and click the Submit button. In the background, the dRAX Dashboard generates the equivalent of the xapp_config.json, and sends it to the xApp /config API endpoint. This triggers the xApp Library Settings class to apply the configuration change, but also to store this configuration change into the xApp Database for persistence.</p>
<table>
<tr>
<td>
<img align="center" alt="xApp example configuration options image" src="images/xapp_example_configuration_options.png" title="xApp example configuration options"/>
</td>
</tr>
<tr>
<td>Figure: xApp example configuration options
   </td>
</tr>
</table>
<h4 id="changing-xapp-configuration-during-runtime-xapp-api"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.3.4</span> Changing xApp Configuration during runtime - xApp API<a class="headerlink" href="#changing-xapp-configuration-during-runtime-xapp-api" title="Permanent link">⚓︎</a></h4>
<p>The configuration of an xApp can also be changed using the xApp /config API endpoint. To do so, we need to create the xapp_config.json. This JSON is then forwarded to the xApp /config API, which will trigger the Settings class in the xApp Library to adjust the xApp Configuration and save teh changes to the xApp Database for persistence. For example, if we want to change the LOG_LEVEL configuration option from our example, we can simply create the following xapp_config.json:</p>
<div class="highlight"><pre><span></span><code>{
 'LOG_LEVEL': 20,
}
</code></pre></div>
<p>By creating such a JSON and sending it to the xApp /config API, the configuration options can be edited during runtime. The xApp API can be reached via the dRAX RIC API Gateway. Each xApp has their API endpoints exposed through the dRAX RIC API Gateway. You can use the:</p>
<p>/xappconfiguration/config/{xAppName}</p>
<p>API endpoint to reach the configuration of each xApp. You can get the xApp configuration from this endpoint and edit it. Details on the dRAX RIC API Gateway endpoints for the xApps can be seen on Swagger which can be reached at:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernets_ip&gt;:31315/api/v1/docs
</code></pre></div>
<p>Just substitute &lt;kubernetes_ip&gt; with the advertised address of your Kubernetes cluster.</p>
<h3 id="xapp-endpoints"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.4</span> xApp Endpoints<a class="headerlink" href="#xapp-endpoints" title="Permanent link">⚓︎</a></h3>
<p>The xApp Endpoints are a list of urls explaining to the xApp where to find databases and event brokers. The xapp_endpoints.json, which is loaded by the xApp Builder, is filled with information how to reach all the necessary dRAX RIC hooks. Since this is generated by the xApp Helm Chart, these URLs and ports can also be auto discovered, which is what the xApp Helm Chart does. This way, the developer does not have to worry about how to properly connect to all the dRAX RIC hooks. Some of the default endpoints this file contains are:</p>
<table>
<tr>
<td>Configuration option
   </td>
<td>Type
   </td>
<td>Description
   </td>
</tr>
<tr>
<td>NATS_URL
   </td>
<td>Optional
   </td>
<td>The url of the NATS broker
   </td>
</tr>
<tr>
<td>KAFKA_URL
   </td>
<td>Optional
   </td>
<td>The url of the Kafka broker
   </td>
</tr>
<tr>
<td>REDIS_URL
   </td>
<td>Required
   </td>
<td>The url of the xApp Redis database
   </td>
</tr>
</table>
<p>The developer is however free to add additional xApp endpoints, so they can be accessible through the endpoints object in the Settings class. This can be done in the xApp Helm Chart. Edit the xApp Chart values.yaml file, and locate the xappEnpoints key:</p>
<div class="highlight"><pre><span></span><code>...
#### Define the xapp_endpoints.json
xappEnpoints:
  REDIS_URL: "redis://{{ .Release.Name }}-xapp-redis.{{ .Release.Namespace }}:6379"
  KAFKA_URL: "kafka://{{ .Values.global.kubeIp }}:31090"
  API_URL: "http://{{ .Values.global.kubeIp }}:31315"
  NATS_URL: "nats://{{ .Values.global.kubeIp }}:31000"
...
</code></pre></div>
<p>Here, the developer can add additional endpoints.</p>
<h3 id="xapp-settings-class"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.5</span> xApp Settings Class<a class="headerlink" href="#xapp-settings-class" title="Permanent link">⚓︎</a></h3>
<p>Most configuration can be accessed through the Settings class, which abstracts away the peculiarities when dealing with configuration. The Settings class is in charge of setting the configuration options locally through the xApp configuration files. Furthermore, it is in charge of changing those configuration options once a change happens via the xApp API. Finally, it also stored the configuration in the xApp Database for persistence.</p>
<p>Different configuration options, metadata, and endpoints can be used as follows:</p>
<div class="highlight"><pre><span></span><code>xapp.settings().get_config(“LOG_LEVEL”)

xapp.settings().metadata[‘last_modified’]

xapp.settings().urls[‘NATS_URL’]
</code></pre></div>
<p><strong>NOTE:</strong> Connections can easily be made using xapp.nats(name=”NATS_URL”) and thus accessing urls directly is discouraged.</p>
<p>Another way of accessing the configuration options is by creating a variable and polling the configuration option. This way the variable is always updated on a change:</p>
<div class="highlight"><pre><span></span><code>log_level = xapp.settings().poll_config(“LOG_LEVEL”)

while True:
  (topic, data) = xapp.kafka()
  if log_level() &lt;= 10:
    print(“Received data: ” + str(data))
</code></pre></div>
<h3 id="resetting-the-configuration-upon-redeployment-of-the-xapp"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.6</span> Resetting the configuration upon redeployment of the xApp<a class="headerlink" href="#resetting-the-configuration-upon-redeployment-of-the-xapp" title="Permanent link">⚓︎</a></h3>
<p>As stated before, the xApp Configuration is saved in the xApp Database with persistence. This means that on redeployment, your old configuration will be restored. You can, however, choose to delete the old configuration and redeploy with the default deployment time configuration options. To do so, in the values.yaml file in the example/helm_chart/xapp folder of the xApp Framework Package, change the value of the xappFrameworkConfig.flushOnDeployment field to ‘true’.</p>
<h4 id="general-xapp-framework-configuration-options"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.6.1</span> General xApp Framework configuration options<a class="headerlink" href="#general-xapp-framework-configuration-options" title="Permanent link">⚓︎</a></h4>
<div class="highlight"><pre><span></span><code>xappFrameworkConfig:
  # If you want to flush the existing config, and use the config on helm install, enable the following
  flushOnDeployment: true
</code></pre></div>
<h3 id="how-to-create-configuration-option-widgets-on-the-drax-dashboard"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.10.7</span> How to create configuration option widgets on the dRAX Dashboard<a class="headerlink" href="#how-to-create-configuration-option-widgets-on-the-drax-dashboard" title="Permanent link">⚓︎</a></h3>
<p>The dashboard front-end makes use of the react-jsonschema-form library to visualize the xApp configuration form. Changing the  "jsonSchemaOptions" and "uiSchemaOptions" objects within the xApp configuration xapp_metadata.json, will change the way the form appears on the browser. e.g.</p>
<div class="highlight"><pre><span></span><code>  {
    "name": "example_slider",
    "description": "Test string configuration option",
    "default": 10,
    "jsonSchemaOptions": {
      "type": "number",
      "minimum": 0,
      "maximum": 50
    },
    "uiSchemaOptions": {
      "ui:widget": "range"
    }
  },
</code></pre></div>
<p>Will create a configuration option named “example_slider”, with a default value of 10. Then the jsonSchemaOptions define that this is a number, with a range of (0-50). The uiSchemaOptions defines this as a “range” widget, which is a slider. Therefore, the dRAX Dashboard will use this data to display a slider.</p>
<p>For more information and how to modify these options check :</p>
<p><a href="https://react-jsonschema-form.readthedocs.io/en/latest/usage/widgets/">https://react-jsonschema-form.readthedocs.io/en/latest/usage/widgets/</a></p>
<p>The visualization library used can be found here:</p>
<p><a href="https://github.com/rjsf-team/react-jsonschema-form">https://github.com/rjsf-team/react-jsonschema-form</a></p>
<h2 id="xapp-helm-chart-in-depth"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.11</span> xApp Helm Chart In-Depth<a class="headerlink" href="#xapp-helm-chart-in-depth" title="Permanent link">⚓︎</a></h2>
<p>The way we package and deploy our xApp is using Helm. Therefore, we created the xApp Helm Chart to accompany our xApp. Editing the Helm chart is done as any other Helm chart. Most of the fields in the values.yaml file are auto-generated and prebuilt. The xApp Helm chart can be located in the <em>example</em> folder of the xApp Framework repository:</p>
<p><a href="https://github.com/accelleran/xapp-framework-package.git">https://github.com/accelleran/xapp-framework-package</a>.</p>
<h3 id="version-control"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.11.1</span> Version control<a class="headerlink" href="#version-control" title="Permanent link">⚓︎</a></h3>
<p>The version of the xApp is configured in the Chart.yaml file in the /helm_chart/xapp folder. Here we have two version fields: i) version and ii) appVersion. The first one corresponds to the version of the xApp Helm Chart, while the second one is the version of the xApp Core Docker image.</p>
<h3 id="xapp-core-docker-image-to-use"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.11.2</span> xApp Core Docker image to use<a class="headerlink" href="#xapp-core-docker-image-to-use" title="Permanent link">⚓︎</a></h3>
<p>Which Docker image of the xApp Core is used when deploying the xApp Helm Chart is defined in the values.yaml file under the ‘<em>image.repository’</em> field. You can specify a local Docker image or a remote Docker repository. The ‘_image.tag” _field can also be used to override the version of the xApp Core Docker image that is defined by the appVersion field in the Chart.yaml.</p>
<h3 id="how-to-add-another-microservice-helm-chart-to-the-xapp"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.11.3</span> How to add another microservice helm chart to the xApp<a class="headerlink" href="#how-to-add-another-microservice-helm-chart-to-the-xapp" title="Permanent link">⚓︎</a></h3>
<p>Adding another microservice helm chart to your xApp requires some Helm knowledge. We try to create a simple guide here as a starting point. We will add InfluxDB to our xApp.</p>
<ol>
<li>
<p>Add the InfluxDB Helm Chart to the xApp</p>
<p>This is done by editing the Chart.yaml file in the /helm_chart/xapp folder. Under the ‘dependencies’ field. add the following:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>dependencies:
  - name: xapp-redis
    condition: xapp-redis.enabled
    version: 0.2.0
    repository: https://accelleran.github.io/helm-charts/
  - name: influxdb
    condition: influxdb.enabled
    version: 4.8.5
    repository: https://github.com/influxdata/influxdb
</code></pre></div>
<p>Give the Helm Chart ‘name’, set the conditions for it to be installed under ‘condition’, choose the ‘version’ of the helm chart to be installed and finally give the Helm Chart repository where the Helm Chart is located.</p>
<ol>
<li>Next, edit the values.yaml file to enable editing the new Helm Charts specific configuration:</li>
</ol>
<div class="highlight"><pre><span></span><code>influxdb:
  # Enable/disable installation of InfluxDB
  enabled: true

  setDefaultUser:
    enabled: true
    user:
      username: admin
      password: admin
</code></pre></div>
<p>Here, make sure to use the ‘name’ used in the Chart.yaml file. Note that here we create the ‘enabled’ option, which is the ;condition; statement in the Chart.yaml. The rest of the fields are InfluxDB specific fields which come from its own Helm Chart. Therefore, you can pick any config option from the InfluxDB Helm charts’ values.yaml and incorporate it in the xApp values.yaml file this way.</p>
<ol>
<li>Optionally add some of the InfluxDB specific configuration options as xApp Configuration so that you can access them in the xApp Core. You can add them to the xapp_metadata.json file, which will allow you to also set their default values, enable editing them from the dRAX Dashboard and also provide visual widgets for those configuration options.</li>
</ol>
<div class="highlight"><pre><span></span><code>"config_options": [
        ...
        {
            "name": "influxdb_username",
            "description": "InfluxDB User name",
            "default": "admin",
            "jsonSchemaOptions": {
                "type": "string"
            },
            "uiSchemaOptions": {}
        },
        ...
]
</code></pre></div>
<ol>
<li>To change their value on deployment, you can edit the xappConfig field in the values.yaml of the xApp Helm chart:</li>
</ol>
<div class="highlight"><pre><span></span><code>xappConfig:
  ...
  influxdb_username: root
  ...
</code></pre></div>
<h2 id="xapps-lifecycle-in-depth"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12</span> xApps Lifecycle In-depth<a class="headerlink" href="#xapps-lifecycle-in-depth" title="Permanent link">⚓︎</a></h2>
<p>In this section we will explain the lifecycle of the xApps in the RIC.</p>
<table>
<tr>
<td>
<img align="center" alt="dRAX RIC and xApp interactions Diagram" src="images/ric_and_xapp_interactions_diagram.png" title="dRAX RIC and xApp interactions" width=""/>
</td>
</tr>
<tr>
<td>Figure: dRAX RIC and xApp interactions
   </td>
</tr>
</table>
<h3 id="service-monitor-and-service-orchestrator-roles"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.1</span> Service Monitor and Service Orchestrator roles<a class="headerlink" href="#service-monitor-and-service-orchestrator-roles" title="Permanent link">⚓︎</a></h3>
<p>Part of the dRAX RIC are the Service Monitor and Service Orchestrator which play a key role in the xApp lifecycle management.</p>
<h4 id="service-orchestrator"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.1.1</span> Service Orchestrator<a class="headerlink" href="#service-orchestrator" title="Permanent link">⚓︎</a></h4>
<p>The Service Orchestrator is a service of the dRAX RIC which has a number of tools at its disposal. It contains a Kubernetes client as well as a Helm client, enabling it to deploy Kubernetes resources. It is exposed through the dRAX RIC API Gateway on endpoint with two methods (POST to deploy an xApp or DELETE to delete an xApp):</p>
<ul>
<li>/deployment/xapp</li>
</ul>
<p>Details on the endpoint can be found on the dRAX RIC API Gateway Swagger page:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernets_ip&gt;:31315/api/v1/docs
</code></pre></div>
<p>Just substitute &gt;kubernetes_ip&lt; with the advertise address of your Kubernetes cluster.</p>
<p>The Service Orchestrator supports multiple deployment options:</p>
<ul>
<li>Using a local Helm chart package</li>
<li>Using a remote Helm repository</li>
</ul>
<p>In both cases, you can also send the optional values.yaml file with specific xApp configuration options.</p>
<h4 id="service-monitor"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.1.2</span> Service Monitor<a class="headerlink" href="#service-monitor" title="Permanent link">⚓︎</a></h4>
<p>The Service Monitor is equipped with the Kubernetes client, so it's able to monitor all the deployed resources. Therefore the Service Monitor is used for:</p>
<ul>
<li>xApp discovery</li>
<li>Retrieving relevant configuration options of dRAX RIC resources, such as services, ports, etc.</li>
</ul>
<h3 id="onboarding"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.2</span> Onboarding<a class="headerlink" href="#onboarding" title="Permanent link">⚓︎</a></h3>
<p>There are 2 ways of onboarding an xApp:</p>
<ul>
<li>Through the dRAX Dashboard</li>
<li>By using the Service Orchestrator endpoint via the dRAX RIC API Gateway</li>
</ul>
<h4 id="using-the-drax-dashboard"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.2.1</span> Using the dRAX Dashboard<a class="headerlink" href="#using-the-drax-dashboard" title="Permanent link">⚓︎</a></h4>
<p>Go to the dRAX dashboard, which by default is on port 31315:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernetes_ip&gt;:31315
</code></pre></div>
<p>On the left side, navigate to <strong>New deployments -&gt; xApp deployment</strong>. On the next page you should see a <strong>Deploy new xApp</strong> button. After clicking the button you will land on the xApp deployment page. Here you need to specify the xApp metadata, such as:</p>
<ul>
<li>xApp name</li>
<li>Organization that made the xApp</li>
<li>Team inside the organization</li>
<li>Version of the xApp</li>
<li>Owner of the xApp</li>
</ul>
<p>Next, you specify the “Deploy Method”. Here you can choose:</p>
<ul>
<li>Upload Helm Chart - To upload a packaged Helm chart .tgz file</li>
<li>Remote Helm Repository - To specify a Helm repository from which to deploy the xApp</li>
</ul>
<p>If you select “Upload Helm Chart”, you will get the option to:</p>
<ul>
<li>Upload the Helm Chart package .tgz file</li>
<li>Upload the optional values.yaml file for the Helm Chart</li>
</ul>
<p><strong>NOTE:</strong> The Service Orchestrator automatically knows the Kubernetes advertise address used in its Kubernetes cluster, hence it will automatically populate this field in the xApps values.yaml file. You do not need to provide a separate values.yaml for this, hence the deployment procedure is simple. Of course, if on deployment time you need to change other parameters in the values.yaml (such as changing the default configuration options etc.) you can supply the values.yaml file.</p>
<p>If you select “Remote Helm Repository”, you will need to fill in a few more fields:</p>
<ul>
<li>Repository name - A generic name of your choice</li>
<li>Repository URL - The URL where the Helm Chart repository is located</li>
<li>Chart name - the name of the Helm Chart in the repository where the xApp is located</li>
<li>An option to also upload a values.yaml file</li>
</ul>
<p>Once the details are filled in, click “Submit”, and your xApp will be deployed.</p>
<h4 id="using-the-service-orchestrator-endpoint-via-the-drax-ric-api-gateway"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.2.2</span> Using the Service Orchestrator endpoint via the dRAX RIC API Gateway<a class="headerlink" href="#using-the-service-orchestrator-endpoint-via-the-drax-ric-api-gateway" title="Permanent link">⚓︎</a></h4>
<p>As described before, we use the Service Orchestrator to deploy the dRAX RIC xApps. The method described before, using the dRAX Dashboard, also in the background uses the Service Orchestrator. Therefore, you may also choose to deploy an xApp directly using the Service Orchestrator by using its API endpoint via the dRAX RIC API Gateway. Details on the contents of the API are on the dRAX RIC API Gateway Swagger:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernets_ip&gt;:31315/api/v1/docs
</code></pre></div>
<p>Just substitute &lt;kubernetes_ip&gt; with the advertise address of your Kubernetes cluster.</p>
<p>You again have the possibility to either:</p>
<ul>
<li>deploy using a helm chart package .tgz file</li>
<li>Deploy from a remote Helm Chart repository</li>
</ul>
<p>Deploying an xApp using a local Helm chart tgz package file can be done using the curl command like this:</p>
<div class="highlight"><pre><span></span><code>curl -X POST "http://10.55.1.2:31315/api/deployment/xapp" -H "accept: application/json" -H "Content-Type: multipart/form-data" -F 'xAppForm={"xAppName":"example-xapp","organization":"Accelleran","team":"dRAX","version":"0.1.0","owner":"Owner","method":"Upload Helm Chart","namespace":"default"}' -F "file=@/home/ad/xapp-training-course/xapp-0.1.0.tgz;type=application/x-compressed-tar" -F "values=@/home/ad/xapp-training-course/values.yaml;type=application/x-yaml"
</code></pre></div>
<p>Deploying an xApp using a remote Helm chart repository can be done using the curl command as an example:</p>
<div class="highlight"><pre><span></span><code>curl -X POST "http://10.55.1.2:31315/api/deployment/xapp" -H "accept: application/json, text/plain, */*" -H "Content-Type: multipart/form-data" -F 'xAppForm={"xAppName":"example-xapp","organization":"Accelleran","team":"dRAX","version":"0.1.0","owner":"Owner","method":"Remote Helm Repository","chartName":"xapp-hello-world","url":"https://accelleran.github.io/xapp-hello-world/","repoName":"example-repo-name","namespace":"default"}' -F "values=@/home/dimitris/Desktop/5g_logs/values.yaml;type=application/x-yaml"
</code></pre></div>
<p>The following information is of interest:</p>
<ul>
<li><strong>10.55.1.2</strong> - Is the Kubernetes IP</li>
<li><strong>example-xapp </strong>- is the xApp name</li>
<li><strong>Accelleran </strong>- is the organisation</li>
<li><strong>dRAX </strong>- is the team</li>
<li><strong>0.1.0 </strong>- is the version of the xApp</li>
<li><strong>Owner </strong>- the owner of the xApp</li>
<li><strong>Upload Helm Chart/Remote Helm Repository </strong>- specifies whether we are uploading a helm .tgz package or using a remote Helm repository</li>
<li>
<p>If a .tgz helm package file is used, then
<div class="highlight"><pre><span></span><code>    **-F "file=@/home/ad/xapp-training-course/xapp-0.1.0.tgz;type=application/x-compressed-tar" **
</code></pre></div>
    specifies the the .tgz helm package and its location</p>
</li>
<li>
<p>If a remote helm repository is used, then <strong>https://accelleran.github.io/xapp-hello-world/ </strong>is the URL to the remote repository</p>
</li>
<li>If a remote helm repository is used, then <strong>xapp-hello-world </strong>is the name of the helm chart in the remote repository</li>
<li>If a remote helm repository is used, then <strong>example-repo-name </strong>is the generic name used to save the repository URL in helm</li>
<li>Finally,
<div class="highlight"><pre><span></span><code>    **-F “values=@/home/dimitris/Desktop/5g_logs/values.yaml;type=application/x-yaml"**
</code></pre></div>
    specifies the optional values.yaml file and its location</li>
</ul>
<h3 id="discovery"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.3</span> Discovery<a class="headerlink" href="#discovery" title="Permanent link">⚓︎</a></h3>
<p>Once the xApp is deployed, the dRAX Service Monitor automatically registers the xApp as deployed using predefined labels in the xApp Kubernetes objects. This information is gathered by the dRAX RIC API Gateway and is used by the dRAX Dashboard where the new xApp appears in the <strong>xApps Management</strong> tab. From here, the user can control and configure the xApp.</p>
<p>A user can also get this information programmatically via the dRAX RIC API Gateway. Endpoints are available to:</p>
<ul>
<li>Get the xApps list with all the deployed xApps</li>
<li>Get the configuration of an xApp</li>
<li>Check the health of an xApp</li>
</ul>
<p>Details are available on the dRAX RIC API Gateway Swagger:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernets_ip&gt;:31315/api/v1/docs
</code></pre></div>
<p>Just substitute ≶kubernetes_ip&gt; with the advertise address of your Kubernetes cluster.</p>
<h3 id="configuration"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.4</span> Configuration<a class="headerlink" href="#configuration" title="Permanent link">⚓︎</a></h3>
<p>Details on how the xApps are configured can be found in the <a href="#xapp-configuration-in-depth">xApp Configuration In-depth</a> section. Here we summarize that the xApp can be configured:</p>
<ul>
<li>On deployment time using the xApp Helm Chart values.yaml file</li>
<li>During runtime through the dRAX Dashboard</li>
<li>During runtime through the xApps’ API, which can be reached through the dRAX RIC API Gateway</li>
</ul>
<p>The configuration description can be found in the "<a href="#xapp-configuration-in-depth">xApp Configuration In-depth</a>" section.</p>
<h3 id="uninstallation"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.12.5</span> Uninstallation<a class="headerlink" href="#uninstallation" title="Permanent link">⚓︎</a></h3>
<p>Uninstalling an xApp in the dRAX RIC can be done in 2 ways:</p>
<ul>
<li>Using the dRAX Dashboard</li>
<li>Using the service Orchestrator API via the dRAX RIC API Gateway</li>
</ul>
<p>If you are using the dRAX Dashboard, you can simply go to the <strong>xApps Management</strong> tab on the left side of the dashboard. From here you can see the xApp list of currently deployed xApp. For each xApp, you can see an “Uninstall” button, which if you click will uninstall the xApp.</p>
<p>On the other hand, you can also reach the /deployment/xapp endpoint on the dRAX RIC API Gateway and use the DELETE method to delete an xApp. Details for the endpoint are available on the dRAX RIC API Gateway Swagger:</p>
<div class="highlight"><pre><span></span><code>http://&lt;kubernets_ip&gt;:31315/api/v1/docs
</code></pre></div>
<p>Just substitute &lt;kubernetes_ip&gt; with the advertise address of your Kubernetes cluster.</p>
<p>An example of how to use delete an xApp using the API Gateway can be seen below:</p>
<div class="highlight"><pre><span></span><code>curl -X DELETE -H "accept: application/json" -H "Content-Type: application/json" -d '{"name":"accelleran-drax-example-xapp-010", "namespace":"default"}' http://10.55.1.2:31315/api/deployment/xapp
</code></pre></div>
<p>Here we use the curl command to reach the API endpoint, and use the following parameters:</p>
<ul>
<li><strong>accelleran-drax-example-xapp-010 </strong>- This is the name of the xApp</li>
<li><strong>default </strong>- This is the namespace where the xApp is deployed</li>
<li><strong>10.55.1.2 </strong>- This is an example Kubernetes advertise IP</li>
</ul>
<h2 id="writing-the-xapp-core-in-a-different-language"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.13</span> Writing the xApp Core in a different language<a class="headerlink" href="#writing-the-xapp-core-in-a-different-language" title="Permanent link">⚓︎</a></h2>
<p>We have built the xApp Framework with the objective to simplify the development of xApps for developers. Hence, most of the lower level details of the xApps interfaces with the dRAX RIC are abstracted into simpler and easy to use methods. These methods are implemented using the xApp Library, which was written in Python. The xApp Library and the developer code are then located inside the xApp Core, a Docker image which containirizes the code in a environment with all the prerequisites installed. The xApp Core, song with the xApp Database, are then deployed using the xApp Helm Chart, which takes care of automating the deployment, by for example discovering the URLs and ports used by the dRAX RIC. That way the developer does not need to worry about such details.</p>
<p>However, if the developer wishes, the xApp can be written in any other programming language, and can be deployed in any other form that suits the developer. The developer, in that case, needs to implement all the necessary functionality to interface with the dRAX RIC alone. Here, we briefly summarize the different approaches and what the developer, beside the functionality and algorithm they bring, need to implement for the xApp to work properly with the dRAX RIC.</p>
<h3 id="changing-the-xapp-library-using-a-different-programming-language"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.13.1</span> Changing the xApp Library - Using a different programming language<a class="headerlink" href="#changing-the-xapp-library-using-a-different-programming-language" title="Permanent link">⚓︎</a></h3>
<p>The developer can write an equivalent of the xApp Library in a different programming language. This means that the developer will need to define the following:</p>
<ul>
<li>A Kafka client: A Kafka client which is used to receive or send data from/to the dRAX RIC Databus. The developer also needs to properly configure the client, set the Kafka URL, port, etc. used by the Kafka in the dRAX RIC.</li>
<li>A NATS client: The dRAX RIC also has a NATS databus. Hence, the developer needs to have a NATS client, properly configured to send or receive data to/from it. Of course the developer might not need to use the NATS databus, but just the Kafka one, in which case this component becomes optional.</li>
<li>A REDIS client: As the xApp uses REDIS as its xApp Database, the xApp should have a REDIS client to interface to this database. The developer has to properly configure thai client as well. Of course, the developer can choose not to have a xApp Database (a scenario we will explain later), so this is optional</li>
<li>An API client: To communicate to the dRAX RIC API Gateway, the xApp needs an API client. The developer needs to take care of properly configuring the client.</li>
<li>NetConf client: If the developer wants to communicate to the NetConf servers in dRAX via the NetConf protocol, a NetConf client is needed. Again, the developer also needs to take care of the configuration of the client.</li>
<li>A protobuf client: The dRAX Commands, such as the handover and sub-band masking one, are issued by creating a protobuf message and sending it via NATS tpo the correct topic. The developer would need to create the protobuf message based on the proto definition of thos messages, have a properly configured NATS client to send that messages, and finally know the topic on NATS where the message needs to be sent.</li>
<li>An API: The xApp needs to have API endpoints, especially the /config and /metadata which are used by the dRAX Dashboard to configure the xApp. Hence, the developer needs to create such endpoints for their xApp. If these are not present, compatibility with teh dRAX Dashboard cannot be achieved.</li>
</ul>
<p>Of course, each of the components is optional, depending on what the xApp is supposed to do.</p>
<p>Once the xApp is written in another language, the developer also needs to take care of generating the xApp Core Docker image, which we will explain in the following subsection. The developer may also choose to run its xApp locally, without integrating it into the Kubernetes where dRAX is running, however the support for such a scenario is limited. For example, the dRAX Dashboard will not be able to discover the xApp, hence it will not appear in the dRAX Dashboard. You will not be able to configure the xApp via the dashboard or via the API endpoints.</p>
<h3 id="changing-the-xapp-core"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.13.2</span> Changing the xApp Core<a class="headerlink" href="#changing-the-xapp-core" title="Permanent link">⚓︎</a></h3>
<p>The developer is free to take the Dockerfile and Dockerfile.dev from the xApp framework as a starting point to generate their own xApp Core. The developer is in charge of creating the xApp Core that has all the requirements installed to run the xApp they have created in another language.</p>
<h3 id="changing-the-xapp-helm-chart"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.13.3</span> Changing the xApp Helm Chart<a class="headerlink" href="#changing-the-xapp-helm-chart" title="Permanent link">⚓︎</a></h3>
<p>Once an xApp Core Docker image is generated, the developer is in charge of editing the Helm Chart to include this new xApp Core Docker image. This can be as simple as changing the image.repository field in the values.yaml file. However, if additional information needs to be passed to the xApp Core Docker image on deployment, the developer has to edit the Helm Chart manually.</p>
<h3 id="changing-the-whole-xapp-framework"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.13.4</span> Changing the whole xApp Framework<a class="headerlink" href="#changing-the-whole-xapp-framework" title="Permanent link">⚓︎</a></h3>
<p>The developer may also choose to run the xApp in a completely different way, and not use any of the xApp Framework blocks. In this case, the developer needs to take care of where the xApp is deployed, and how it would integrate into dRAX. If the xApp is run locally, without integrating it into the Kubernetes where dRAX is running, the support for such a scenario is limited. For example, the dRAX Dashboard will not be able to discover the xApp, hence it will not appear in the dRAX Dashboard. You will not be able to configure the xApp via the dashboard or via the API endpoints.</p>
<p>If the xApp developer chooses to run the xApp inside Kubernetes, the developer is in charge of setting up the proper labels for the pods, in order for the dRAX Dashboard to discover the xApp. For the pods, they should have the following additional labels:</p>
<div class="highlight"><pre><span></span><code>drax/role: xapp
drax/xapp-name: xapp-name
xapp/mode: Production # or Developer in case the xApp is in development
</code></pre></div>
<p>For the Kubernetes Services, besides the same labels as for the pods, we add the component name:</p>
<div class="highlight"><pre><span></span><code>drax/role: xapp
drax/xapp-name: xapp-name
xapp/mode: Production # or Developer in case the xApp is in development
drax/xapp-component-name: xapp-dev-ssh
</code></pre></div>
<p><strong>NOTE:</strong> The xApp framework has some default services, such as the service where its own API is exposed, the optional development mode ssh service, etc. All this is up to the developer to implement.</p>
<p><strong>NOTE 2:</strong> Note that the API endpoints of the xApp such as /config and /metadata are required for proper functionality with the dRAX Dashboard. Hence the developer needs to implement the equivalents, and provide the same information as described in the <a href="#xapp-configuration-in-depth">xApp Configuration In-depth</a> section.</p>
<h2 id="appendix-pushing-to-dockerhub"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.14</span> Appendix: Pushing to Dockerhub<a class="headerlink" href="#appendix-pushing-to-dockerhub" title="Permanent link">⚓︎</a></h2>
<ol>
<li>One example remote Docker image repository is Dockerhub. Create an account and log in on <a href="https://hub.docker.com/">https://hub.docker.com/</a>. Click on Create Repository and name it &lt;xapp-name&gt;.</li>
<li>
<p>Log into the Docker Hub from the command line using:
<div class="highlight"><pre><span></span><code>    docker login --username=yourdockerhubusername --email=[name@company.com](mailto:name@company.com)
</code></pre></div>
    Enter your password when prompted.</p>
</li>
<li>
<p>Check the IMAGE ID of your local xApp Docker image:
<div class="highlight"><pre><span></span><code>    docker images
</code></pre></div></p>
</li>
<li>Tag your xApp Docker image by using its IMAGE ID:
<div class="highlight"><pre><span></span><code>    docker tag &lt;image-id&gt; yourdockerhubusername/&lt;xapp-name&gt;:&lt;xapp-version&gt;
</code></pre></div></li>
<li>Push your xApp Docker image to the repository you created:
<div class="highlight"><pre><span></span><code>    docker push yourdockerhubusername/&lt;xapp-name&gt;
</code></pre></div></li>
</ol>
<h2 id="appendix-conversion-from-the-xapp-framework-to-the-xapp-library"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.15</span> Appendix: Conversion from the xApp Framework to the xApp Library<a class="headerlink" href="#appendix-conversion-from-the-xapp-framework-to-the-xapp-library" title="Permanent link">⚓︎</a></h2>
<p>Due to the kind of big changes between the different versions of the xApp Framework/Library, this appendix handles how to convert between them.</p>
<h3 id="xapp-configuration"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.15.1</span> xApp Configuration<a class="headerlink" href="#xapp-configuration" title="Permanent link">⚓︎</a></h3>
<p>The xApp Configuration has undergone a big change from the previous version of the xApp framework. The xApp Configuration was generated by the xApp helm Chart, by generating the xapp-configuration.json. In the new xApp Framework, the developer is in charge of creating the xapp_metadata.json file, which contains metadata and configuration options, including their default values. Only when you need to change the configuration from their default values, you can use the xApp helm Chart values.yaml to do so. This is explained in the following subsection.</p>
<p>The developer needs to copy all the configuration options that were defined in the xApp Helm Chart values.yaml under the xappConfig key, to the xapp_metadata.json, keeping in mind the xapp_metadata.json format, which can be seen in the <a href="#xapp-metadata">xApp Metadata</a> section.</p>
<p>The xapp_endpoints.json configuration file is generated by the xApp Helm Chart. Its content can bee seen under the xappEndpoints key in the xApp Helm Chart values.yaml. These are the normal dRAX RIC endpoints required for the xApp Framework to work properly. In case you need to add other endpoints, you can check the <a href="#xapp-endpoints">xApp Endpoints</a> section.</p>
<h3 id="xapp-helm-chart"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.15.2</span> xApp Helm Chart<a class="headerlink" href="#xapp-helm-chart" title="Permanent link">⚓︎</a></h3>
<p>We recommend that you pick up the new xApp Helm Chart from the xApp Framework repository, in the <em>example</em> folder. Then, edit the values.yaml file as follows.</p>
<ol>
<li>The image key: As with the previous version, edit the image key to point to your own xApp Core Docker image, including the repository and tag fields under image. There is no particular change here, but we note it as a general change required.</li>
<li>The xappConfig key: You will notice a change in the way we define the xApp Configuration options. First of all, part of the previous configuration options are moved to the xapp_endpoints.json, explained earlier. The rest of the configuration options are moved to xapp_metadata.json. The xapp_metadata.json also holds the default values of the xApp Configuration options. The new xappConfig key in the values.yaml is to change those config options on deployment time only if needed. Hence, by default the xappConfig is set as an empty list. If you need to change the default values, not that the xappConfig is now a list instead of a dictionary. For example, what was previously:</li>
</ol>
<div class="highlight"><pre><span></span><code>xappConfig:
  - name: 'LOG_LEVEL'
     type: int
     value: 20
</code></pre></div>
<p>Is now:</p>
<div class="highlight"><pre><span></span><code>xappConfig:
  LOG_LEVEL: 20
</code></pre></div>
<h3 id="main-code"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.15.3</span> Main code<a class="headerlink" href="#main-code" title="Permanent link">⚓︎</a></h3>
<p>In previous versions, the xApp Framework required the developer to modify the run function inside the processor.py file:</p>
<div class="highlight"><pre><span></span><code>def run(settings, in_queue, out_queue, data_store):
    while True:
        msg = in_queue.get()
        data  = msg['data']
        topic = msg['topic']
        # handle data
</code></pre></div>
<p>In the xApp library this can be rewritten as</p>
<div class="highlight"><pre><span></span><code>If __name__ == "__main__":
    builder = xapp_lib.XAppBuilder("..", absolute=False)
    builder.metadata("core/xapp_metadata.json")
    builder.endpoints("config/xapp_endpoints.json")
    builder.config("config/xapp_config.json")
    builder.readme("README.md")
    builder.restapi(
        [
            ("/api/", restapi.MainApiHandler),
            ("/api/actions", restapi.ActionsHandler),
            ("/api/request", restapi.RequestHandler),
        ]
    )
    xapp = builder.build()

    while True:
        (topic, data) = xapp.kafka().json().recv_message()
        # handle data
</code></pre></div>
<h3 id="actions"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.15.4</span> Actions<a class="headerlink" href="#actions" title="Permanent link">⚓︎</a></h3>
<p>Most of the functionality from action_taker has been moved to actions, and requires an xapp.nats() as first argument instead of a queue:</p>
<div class="highlight"><pre><span></span><code>actions.handover_command(xapp.nats(), handover_cells)
</code></pre></div>
<p>The structure of the other arguments hasn’t changed.</p>
<h3 id="xapp-api"><span class="enumerate-headings-plugin enumerate-heading-plugin">2.15.5</span> xApp API<a class="headerlink" href="#xapp-api" title="Permanent link">⚓︎</a></h3>
<p>The xApp API has a small change. You can check the restapi.py example file in the xApp Framework _example _folder. As you can see, we now pass the xapp parameter for access to the xapp class. We also now don’t start the Tornado API in the restapi.py file. We explain how custom xApp API can be added in the <a href="#adding-an-endpoint-behind-the-api">Adding an endpoint behind the /api</a> section.</p>
<p>As can be seen, the xApp API is created now with the xApp Builder:</p>
<div class="highlight"><pre><span></span><code>builder.restapi([
  ("/api/", MainApiHandler),
  ("/api/actions", ActionsHandler),
  ("/api/request", RequestHandler),
])
</code></pre></div>
<p>Hence the previous xApp API endpoints you have to define in the xApp Buidler.</p>
<p>Next, in the restapi.py, you can change the in_queue parameter to the xapp parameter, as seen in the restapi.py example. Then, when sending a message from the xApp API to the main xApp, we used to do:</p>
<div class="highlight"><pre><span></span><code>self.in_queue.put("Message from restapi main handler")
</code></pre></div>
<p>Which is now:</p>
<div class="highlight"><pre><span></span><code>self.xapp().insert_message("Message from restapi main handler")
</code></pre></div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" data-md-state="hidden" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Overview" class="md-footer__link md-footer__link--prev" href=".." rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Overview
            </div>
</div>
</a>
<a aria-label="Next: Nats" class="md-footer__link md-footer__link--next" href="../message_references/3.1/nats/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Nats
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
            Material for MkDocs
          </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.top", "navigation.tabs", "toc.integrate"], "search": "../assets/javascripts/workers/search.fcfe8b6d.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../assets/javascripts/bundle.b1047164.min.js"></script>
</body>
</html>